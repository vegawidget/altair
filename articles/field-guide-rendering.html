<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Field Guide to Rendering Charts • altair</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/sandstone/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Field Guide to Rendering Charts">
<meta property="og:description" content="altair">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">altair</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">4.2.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/altair.html">Getting Started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/installation.html">Installation</a>
    </li>
    <li class="divider">
    </li>
<li class="dropdown-header">Introduction</li>
    <li>
      <a href="../articles/tooltips.html">Tooltips</a>
    </li>
    <li>
      <a href="../articles/vega-datasets.html">Vega Datasets</a>
    </li>
    <li>
      <a href="../articles/view-composition.html">View Composition</a>
    </li>
    <li>
      <a href="../articles/interactive.html">Interactive Charts</a>
    </li>
    <li class="divider">
    </li>
<li class="dropdown-header">Field Guides</li>
    <li>
      <a href="../articles/field-guide-python.html">Python Issues</a>
    </li>
    <li>
      <a href="../articles/field-guide-rendering.html">Rendering Charts</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Gallery
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/example-gallery-01-simple.html">Simple Charts</a>
    </li>
    <li>
      <a href="../articles/example-gallery-02-bar-charts.html">Bar Charts</a>
    </li>
    <li>
      <a href="../articles/example-gallery-03-line-charts.html">Line Charts</a>
    </li>
    <li>
      <a href="../articles/example-gallery-04-area-charts.html">Area Charts</a>
    </li>
    <li>
      <a href="../articles/example-gallery-05-scatter-plots.html">Scatterplots</a>
    </li>
    <li>
      <a href="../articles/example-gallery-06-histograms.html">Histograms</a>
    </li>
    <li>
      <a href="../articles/example-gallery-07-maps.html">Maps</a>
    </li>
    <li>
      <a href="../articles/example-gallery-08-interactive-charts.html">Interactive Charts</a>
    </li>
    <li>
      <a href="../articles/example-gallery-09-case-studies.html">Case Studies</a>
    </li>
    <li>
      <a href="../articles/example-gallery-10-other-charts.html">Other Charts</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/vegawidget/altair" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Field Guide to Rendering Charts</h1>
            
            <h4 data-toc-skip class="date">2022-02-14</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/vegawidget/altair/blob/HEAD/vignettes/field-guide-rendering.Rmd" class="external-link"><code>vignettes/field-guide-rendering.Rmd</code></a></small>
      <div class="hidden name"><code>field-guide-rendering.Rmd</code></div>

    </div>

    
    
<p>There are four foundations upon which this package rests:</p>
<ul>
<li>the <a href="https://altair-viz.github.io/" class="external-link">Altair</a> Python package, to build chart specifications</li>
<li>the <a href="https://rstudio.github.io/reticulate/index.html" class="external-link">reticulate</a> R package, to provide inter-operability with Python</li>
<li>the <a href="https://vega.github.io/vega-lite/" class="external-link">Vega-Lite</a> JavaScript framework, to render chart specifications in an HTML file</li>
<li>the <a href="https://vegawidget.github.io" class="external-link">vegawidget</a> R package, which relies on <a href="https://www.htmlwidgets.org/" class="external-link">htmlwidgets</a> to provide inter-operability with HTML and JavaScript</li>
</ul>
<p>This article deals with the second two items; the <a href="field-guide-python.html">Field Guide to Python Issues</a> deals with the first two.</p>
<div class="section level2">
<h2 id="vegawidget">Vegawidget<a class="anchor" aria-label="anchor" href="#vegawidget"></a>
</h2>
<p>All the rendering is handled by <strong>vegawidget</strong>; so you are referred to its article on <a href="https://vegawidget.github.io/vegawidget/articles/articles/render-vegawidget.html" class="external-link">rendering</a>.</p>
<p>The two main issues on rendering are:</p>
<ul>
<li>sizing</li>
<li>arguments passed to <a href="https://github.com/vega/vega-embed" class="external-link">vega-embed</a> (more specialized)</li>
</ul>
<p>These are discussed in these sections of the vegawidget rendering-article:</p>
<ul>
<li>
<a href="https://vegawidget.github.io/vegawidget/articles/articles/render-vegawidget.html#using-vegawidget-arguments" class="external-link">Using vegawidget arguments</a>, calling the <code><a href="../reference/vegawidget.html">vegawidget()</a></code> function</li>
<li>
<a href="https://vegawidget.github.io/vegawidget/articles/articles/render-vegawidget.html#setting-r-options" class="external-link">Setting R options</a>, can be set a number of ways</li>
<li>
<a href="https://vegawidget.github.io/vegawidget/articles/articles/render-vegawidget.html#knitting-strategies" class="external-link">Knitting strategies</a>, including how to render Vega(-Lite) charts when knitting to a non-HTML format such as PDF</li>
</ul>
</div>
<div class="section level2">
<h2 id="rendering-speed-for-interactive-work">Rendering speed for interactive work<a class="anchor" aria-label="anchor" href="#rendering-speed-for-interactive-work"></a>
</h2>
<p>This section applies to <em>interactive</em> work; it does not apply to RMarkdown documents.</p>
<p>Rather than embed the data itself into the chart spec as JSON (this will become very slow as the data gets to be more than 5000 rows), Altair has an option (supported by Vega-Lite’s URL loader) that saves your data as a JSON file that is referenced in the chart spec.</p>
<p>Keep in mind that this will work only for interactive (non-knitting) work. In Python you would set <code>alt.data_transformers.enable('json')</code>; in R this becomes:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/vegawidget/altair" class="external-link">"altair"</a></span><span class="op">)</span>
<span class="va">alt</span><span class="op">$</span><span class="va">data_transformers</span><span class="op">$</span><span class="fu">enable</span><span class="op">(</span><span class="st">'json'</span><span class="op">)</span></code></pre></div>
<p>The problem is that you won’t see charts in the RStudio pane anymore. This won’t work:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">vega_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/import_vega_data.html">import_vega_data</a></span><span class="op">(</span><span class="op">)</span>

<span class="va">chart</span> <span class="op">&lt;-</span> 
     <span class="va">alt</span><span class="op">$</span><span class="fu">Chart</span><span class="op">(</span><span class="va">vega_data</span><span class="op">$</span><span class="fu">cars</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">$</span>
     <span class="fu">mark_point</span><span class="op">(</span><span class="op">)</span><span class="op">$</span>
     <span class="fu">encode</span><span class="op">(</span>
         x <span class="op">=</span> <span class="st">"Horsepower:Q"</span>,
         y <span class="op">=</span> <span class="st">"Miles_per_Gallon:Q"</span>,
         color <span class="op">=</span> <span class="st">"Origin:N"</span>,
         tooltip <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Name"</span>, <span class="st">"Horsepower"</span>, <span class="st">"Miles_per_Gallon"</span>, <span class="st">"Origin"</span><span class="op">)</span>
     <span class="op">)</span>

<span class="va">chart</span></code></pre></div>
<p>This calls the print method on chart, which runs <code>vegawidget(chart)</code>; instead, you need to tell <code><a href="../reference/vegawidget.html">vegawidget()</a></code> where it can expect your external file.</p>
<p>You have a couple of choices here:</p>
<ul>
<li>
<p>you can call <code><a href="../reference/vegawidget.html">vegawidget()</a></code> supplying a value for <code>base_url</code>:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/vegawidget.html">vegawidget</a></span><span class="op">(</span><span class="va">chart</span>, base_url<span class="op">=</span><span class="st">"."</span><span class="op">)</span></code></pre></div>
</li>
<li>
<p><strong>or</strong> you can set the <code>base_url</code> <em>once</em> for your session using:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/vw_set_base_url.html">vw_set_base_url</a></span><span class="op">(</span><span class="st">"."</span><span class="op">)</span></code></pre></div>
<p>then, this should <em>just work</em> interactively:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">chart</span></code></pre></div>
</li>
</ul>
<p>Keep in mind that by using <code>alt$data_transformers$enable("json")</code>, <strong>all</strong> charts you create subsequently will write out data files until:</p>
<ul>
<li>you restart R.</li>
<li>you enable a different transformer, e.g <code>alt$data_transformers$enable("default")</code>.</li>
</ul>
<p>Altair’s documentation has a <a href="https://altair-viz.github.io/user_guide/data_transformers.html" class="external-link">page dedicated to data transformers</a>.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Ian Lyttle, Haley Jeppson, Altair Developers.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '0d6a37c7b714a8042d5ce01dad53be53',
    indexName: 'altair',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
