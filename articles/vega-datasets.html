<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vega Datasets • altair</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/sandstone/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Vega Datasets">
<meta property="og:description" content="altair">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">altair</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">4.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/altair.html">Getting Started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/installation.html">Installation</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Introduction</li>
    <li>
      <a href="../articles/tooltips.html">Tooltips</a>
    </li>
    <li>
      <a href="../articles/vega-datasets.html">Vega Datasets</a>
    </li>
    <li>
      <a href="../articles/view-composition.html">View Composition</a>
    </li>
    <li>
      <a href="../articles/interactive.html">Interactive Charts</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Field Guides</li>
    <li>
      <a href="../articles/field-guide-python.html">Python Issues</a>
    </li>
    <li>
      <a href="../articles/field-guide-rendering.html">Rendering Charts</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Gallery
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/example-gallery-01-simple.html">Simple Charts</a>
    </li>
    <li>
      <a href="../articles/example-gallery-02-bar-charts.html">Bar Charts</a>
    </li>
    <li>
      <a href="../articles/example-gallery-03-line-charts.html">Line Charts</a>
    </li>
    <li>
      <a href="../articles/example-gallery-04-area-charts.html">Area Charts</a>
    </li>
    <li>
      <a href="../articles/example-gallery-05-scatter-plots.html">Scatterplots</a>
    </li>
    <li>
      <a href="../articles/example-gallery-06-histograms.html">Histograms</a>
    </li>
    <li>
      <a href="../articles/example-gallery-07-maps.html">Maps</a>
    </li>
    <li>
      <a href="../articles/example-gallery-08-interactive-charts.html">Interactive Charts</a>
    </li>
    <li>
      <a href="../articles/example-gallery-09-case-studies.html">Case Studies</a>
    </li>
    <li>
      <a href="../articles/example-gallery-10-other-charts.html">Other Charts</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/vegawidget/altair">
    <span class="fas fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="vega-datasets_files/accessible-code-block-0.0.1/empty-anchor.js"></script><script src="vega-datasets_files/htmlwidgets-1.5.3/htmlwidgets.js"></script><script src="vega-datasets_files/vega-5.17.0/vega.min.js"></script><script src="vega-datasets_files/vega-lite-4.17.0/vega-lite.min.js"></script><link href="vega-datasets_files/vega-embed-6.12.2/vega-embed.css" rel="stylesheet">
<script src="vega-datasets_files/vega-embed-6.12.2/vega-embed.js"></script><script src="vega-datasets_files/vegawidget-binding-0.3.2.9000/vegawidget.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Vega Datasets</h1>
            
            <h4 class="date">2021-01-14</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/vegawidget/altair/blob/master/vignettes/vega-datasets.Rmd"><code>vignettes/vega-datasets.Rmd</code></a></small>
      <div class="hidden name"><code>vega-datasets.Rmd</code></div>

    </div>

    
    
<div id="overview" class="section level2">
<h2 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h2>
<p>The purpose of this article is to demonstrate how to use data provided by the <a href="https://github.com/altair-viz/vega_datasets">Vega datasets</a> Python package.</p>
<p>Here’s the short version:</p>
<ul>
<li><p>We can access the Vega datasets using the <code><a href="../reference/import_vega_data.html">import_vega_data()</a></code> function. This package’s convention is to assign this to an object named <code>vega_data</code>.</p></li>
<li><p>To access the data for a specific dataset, call the method for that dataset: e.g. <code>vega_data$cars()</code>. Where you see a hyphen in a dataset name in the Altair documentation, use an underscore instead, e.g. <code>vega_data$sf_temps()</code>.</p></li>
<li><p>These datasets have metadata that include a description, references, and a URL: e.g. <code>vega_data$cars$references</code>.</p></li>
<li>
<p>When you create an <code>alt$Chart()</code>, the <code>data</code> argument need not be a data frame; it can be a reference to a data frame, such as a URL.</p>
<ul>
<li>If your chart contains a reference to an external resource, such as <code>vega_data$cars$url</code>, it will not render in the RStudio IDE due to RStudio’s (well founded) security policy. If you view such a chart using an external browser, it should work OK if your computer can access the remote data.</li>
</ul>
</li>
</ul>
</div>
<div id="importing" class="section level2">
<h2 class="hasAnchor">
<a href="#importing" class="anchor"></a>Importing</h2>
<p>In the <a href="https://altair-viz.github.io/getting_started/installation.html">Altair documentation</a>, you will see this code used often:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1"></a><span class="im">from</span> vega_datasets <span class="im">import</span> data</span>
<span id="cb1-2"><a href="#cb1-2"></a></span>
<span id="cb1-3"><a href="#cb1-3"></a>cars <span class="op">=</span> data.cars()</span></code></pre></div>
<p>The Altair convention is to use the name <code>data</code> to refer to the <code>data</code> object in the <code>vega_datasets</code> package. This package offers a similar convention:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/vegawidget/altair">"altair"</a></span><span class="op">)</span>

<span class="va">vega_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/import_vega_data.html">import_vega_data</a></span><span class="op">(</span><span class="op">)</span>

<span class="va">cars</span> <span class="op">&lt;-</span> <span class="va">vega_data</span><span class="op">$</span><span class="fu">cars</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>Instead, our convention is to use an object called <code>vega_data</code>.</p>
</div>
<div id="accessing" class="section level2">
<h2 class="hasAnchor">
<a href="#accessing" class="anchor"></a>Accessing</h2>
<p>Our <code>vega_data</code> object has a method to list all its datasets:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">vega_data</span><span class="op">$</span><span class="fu">list_datasets</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; [1] "7zip"          "airports"      "annual-precip" "anscombe"     </span>
<span class="co">#&gt; [5] "barley"        "birdstrikes"</span></code></pre></div>
<p>Each dataset can be accessed using a method whose name is an element returned from <code>vega_data$list_datasets()</code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://tibble.tidyverse.org/">"tibble"</a></span><span class="op">)</span>

<span class="va">vega_data</span><span class="op">$</span><span class="fu">anscombe</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html">as_tibble</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 44 x 3</span>
<span class="co">#&gt;    Series     X     Y</span>
<span class="co">#&gt;    &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt;  1 I         10  8.04</span>
<span class="co">#&gt;  2 I          8  6.95</span>
<span class="co">#&gt;  3 I         13  7.58</span>
<span class="co">#&gt;  4 I          9  8.81</span>
<span class="co">#&gt;  5 I         11  8.33</span>
<span class="co">#&gt;  6 I         14  9.96</span>
<span class="co">#&gt;  7 I          6  7.24</span>
<span class="co">#&gt;  8 I          4  4.26</span>
<span class="co">#&gt;  9 I         12 10.8 </span>
<span class="co">#&gt; 10 I          7  4.81</span>
<span class="co">#&gt; # … with 34 more rows</span></code></pre></div>
<p>It is useful to keep in mind that <strong>reticulate</strong> changes the names of the datasets, and presumably, Python objects in general. Where you see a <code><a href="https://rdrr.io/r/base/Arithmetic.html">-</a></code> in a name of a Python object, a <code>_</code> will be used in the name of the reticulated object in R. For example, in Python: <code>data.sf-temps()</code>; in R:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">vega_data</span><span class="op">$</span><span class="fu">sf_temps</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html">as_tibble</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 8,759 x 2</span>
<span class="co">#&gt;     temp date               </span>
<span class="co">#&gt;    &lt;dbl&gt; &lt;dttm&gt;             </span>
<span class="co">#&gt;  1  47.8 2010-01-01 00:00:00</span>
<span class="co">#&gt;  2  47.4 2010-01-01 01:00:00</span>
<span class="co">#&gt;  3  46.9 2010-01-01 02:00:00</span>
<span class="co">#&gt;  4  46.5 2010-01-01 03:00:00</span>
<span class="co">#&gt;  5  46   2010-01-01 04:00:00</span>
<span class="co">#&gt;  6  45.8 2010-01-01 05:00:00</span>
<span class="co">#&gt;  7  45.9 2010-01-01 06:00:00</span>
<span class="co">#&gt;  8  45.9 2010-01-01 07:00:00</span>
<span class="co">#&gt;  9  46.4 2010-01-01 08:00:00</span>
<span class="co">#&gt; 10  48   2010-01-01 09:00:00</span>
<span class="co">#&gt; # … with 8,749 more rows</span></code></pre></div>
</div>
<div id="metadata" class="section level2">
<h2 class="hasAnchor">
<a href="#metadata" class="anchor"></a>Metadata</h2>
<p>Each dataset has some metadata, such as a description and references.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">wrapcat</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">x</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/base/strwrap.html">strwrap</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span>sep <span class="op">=</span> <span class="st">"\n"</span><span class="op">)</span>
<span class="op">}</span>

<span class="va">vega_data</span><span class="op">$</span><span class="va">anscombe</span><span class="op">$</span><span class="va">description</span> <span class="op">%&gt;%</span> <span class="fu">wrapcat</span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; Anscombe's Quartet is a famous dataset constructed by Francis Anscombe</span>
<span class="co">#&gt; [1]_. Common summary statistics are identical for each subset of the</span>
<span class="co">#&gt; data, despite the subsets having vastly different characteristics.</span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">vega_data</span><span class="op">$</span><span class="va">anscombe</span><span class="op">$</span><span class="va">references</span> <span class="op">%&gt;%</span> <span class="fu">wrapcat</span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; Anscombe, F. J. (1973). 'Graphs in Statistical Analysis'. American</span>
<span class="co">#&gt; Statistician. 27 (1): 17-21. JSTOR 2682899.</span></code></pre></div>
<p>Some of the datasets are stored locally as a part of the Vega datasets Python package, others are not. The method that returns the data, e.g. <code>vega_data$anscombe()</code> will do the right thing. You can use the <code>is_local</code> property to find out what the right thing is for a dataset.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">vega_data</span><span class="op">$</span><span class="va">anscombe</span><span class="op">$</span><span class="va">is_local</span>
<span class="co">#&gt; [1] TRUE</span></code></pre></div>
<p>Each dataset has a remote URL, which you can use instead of a data frame in any Altair <code>data</code> argument.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">vega_data</span><span class="op">$</span><span class="va">anscombe</span><span class="op">$</span><span class="va">url</span>
<span class="co">#&gt; [1] "https://cdn.jsdelivr.net/npm/vega-datasets@v1.29.0/data/anscombe.json"</span></code></pre></div>
</div>
<div id="using-a-url" class="section level2">
<h2 class="hasAnchor">
<a href="#using-a-url" class="anchor"></a>Using a URL</h2>
<p>You can specify <code>data</code> using a URL that points to a dataset, rather than using a data frame explicitly.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cars_url</span> <span class="op">&lt;-</span> <span class="va">vega_data</span><span class="op">$</span><span class="va">cars</span><span class="op">$</span><span class="va">url</span>

<span class="va">chart_cars</span> <span class="op">&lt;-</span> 
  <span class="va">alt</span><span class="op">$</span><span class="fu">Chart</span><span class="op">(</span><span class="va">cars_url</span><span class="op">)</span><span class="op">$</span>
  <span class="fu">encode</span><span class="op">(</span>
    x <span class="op">=</span> <span class="st">"Weight_in_lbs:Q"</span>,
    y <span class="op">=</span> <span class="st">"Miles_per_Gallon:Q"</span>,
    color <span class="op">=</span> <span class="st">"Cylinders:N"</span>
  <span class="op">)</span><span class="op">$</span>
  <span class="fu">mark_point</span><span class="op">(</span><span class="op">)</span>

<span class="va">chart_cars</span></code></pre></div>
<div id="htmlwidget-8a4084ff8e9b741e1f62" style="width:auto;height:auto;" class="vegawidget html-widget"></div>
<script type="application/json" data-for="htmlwidget-8a4084ff8e9b741e1f62">{"x":{
  "chart_spec": {
    "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json",
    "config": {
      "view": {
        "continuousHeight": 300,
        "continuousWidth": 400
      }
    },
    "data": {
      "url": "https://cdn.jsdelivr.net/npm/vega-datasets@v1.29.0/data/cars.json"
    },
    "encoding": {
      "color": {
        "field": "Cylinders",
        "type": "nominal"
      },
      "x": {
        "field": "Weight_in_lbs",
        "type": "quantitative"
      },
      "y": {
        "field": "Miles_per_Gallon",
        "type": "quantitative"
      }
    },
    "mark": "point"
  },
  "embed_options": {
    "renderer": "canvas",
    "defaultStyle": true
  }
},"evals":[],"jsHooks":[]}</script><p>This works in your browser, but not might not work in the RStudio IDE. This is because, for security reasons, the RStudio IDE may not let you refer external URLs that are not on their allow-list (such as YouTube and Vimeo). If you open this up in a browser, it works just fine (as long as you have access to the internet).</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Ian Lyttle, Haley Jeppson, Altair Developers.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '0d6a37c7b714a8042d5ce01dad53be53',
    indexName: 'altair',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
