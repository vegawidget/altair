!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("vega-lib"),require("vega-lite")):"function"==typeof define&&define.amd?define(["vega-lib","vega-lite"],t):e.vegaEmbed=t(e.vega,e.vl)}(this,function(e,t){"use strict";var r=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};function n(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=n[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var i="http://www.w3.org/1999/xhtml",o={svg:"http://www.w3.org/2000/svg",xhtml:i,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function a(e){var t=e+="",r=t.indexOf(":");return r>=0&&"xmlns"!==(t=e.slice(0,r))&&(e=e.slice(r+1)),o.hasOwnProperty(t)?{space:o[t],local:e}:e}function s(e){var t=a(e);return(t.local?function(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}:function(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===i&&t.documentElement.namespaceURI===i?t.createElement(e):t.createElementNS(r,e)}})(t)}function u(){}function l(e){return null==e?u:function(){return this.querySelector(e)}}function c(){return[]}var f=function(e){return function(){return this.matches(e)}};if("undefined"!=typeof document){var h=document.documentElement;if(!h.matches){var p=h.webkitMatchesSelector||h.msMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector;f=function(e){return function(){return p.call(this,e)}}}}var d=f;function v(e){return new Array(e.length)}function m(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}m.prototype={constructor:m,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var g="$";function y(e,t,r,n,i,o){for(var a,s=0,u=t.length,l=o.length;s<l;++s)(a=t[s])?(a.__data__=o[s],n[s]=a):r[s]=new m(e,o[s]);for(;s<u;++s)(a=t[s])&&(i[s]=a)}function w(e,t,r,n,i,o,a){var s,u,l,c={},f=t.length,h=o.length,p=new Array(f);for(s=0;s<f;++s)(u=t[s])&&(p[s]=l=g+a.call(u,u.__data__,s,t),l in c?i[s]=u:c[l]=u);for(s=0;s<h;++s)(u=c[l=g+a.call(e,o[s],s,o)])?(n[s]=u,u.__data__=o[s],c[l]=null):r[s]=new m(e,o[s]);for(s=0;s<f;++s)(u=t[s])&&c[p[s]]===u&&(i[s]=u)}function b(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function _(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function x(e){return e.trim().split(/^|\s+/)}function S(e){return e.classList||new k(e)}function k(e){this._node=e,this._names=x(e.getAttribute("class")||"")}function E(e,t){for(var r=S(e),n=-1,i=t.length;++n<i;)r.add(t[n])}function j(e,t){for(var r=S(e),n=-1,i=t.length;++n<i;)r.remove(t[n])}function A(){this.textContent=""}function O(){this.innerHTML=""}function C(){this.nextSibling&&this.parentNode.appendChild(this)}function z(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function N(){return null}function T(){var e=this.parentNode;e&&e.removeChild(this)}function $(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function I(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}k.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var P={},R=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(P={mouseenter:"mouseover",mouseleave:"mouseout"}));function D(e,t,r){return e=F(e,t,r),function(t){var r=t.relatedTarget;r&&(r===this||8&r.compareDocumentPosition(this))||e.call(this,t)}}function F(e,t,r){return function(n){var i=R;R=n;try{e.call(this,this.__data__,t,r)}finally{R=i}}}function L(e){return function(){var t=this.__on;if(t){for(var r,n=0,i=-1,o=t.length;n<o;++n)r=t[n],e.type&&r.type!==e.type||r.name!==e.name?t[++i]=r:this.removeEventListener(r.type,r.listener,r.capture);++i?t.length=i:delete this.__on}}}function B(e,t,r){var n=P.hasOwnProperty(e.type)?D:F;return function(i,o,a){var s,u=this.__on,l=n(t,o,a);if(u)for(var c=0,f=u.length;c<f;++c)if((s=u[c]).type===e.type&&s.name===e.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=l,s.capture=r),void(s.value=t);this.addEventListener(e.type,l,r),s={type:e.type,name:e.name,value:t,listener:l,capture:r},u?u.push(s):this.__on=[s]}}function V(e,t,r){var n=_(e),i=n.CustomEvent;"function"==typeof i?i=new i(t,r):(i=n.document.createEvent("Event"),r?(i.initEvent(t,r.bubbles,r.cancelable),i.detail=r.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}var M=[null];function q(e,t){this._groups=e,this._parents=t}q.prototype=function(){return new q([[document.documentElement]],M)}.prototype={constructor:q,select:function(e){"function"!=typeof e&&(e=l(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var o,a,s=t[i],u=s.length,c=n[i]=new Array(u),f=0;f<u;++f)(o=s[f])&&(a=e.call(o,o.__data__,f,s))&&("__data__"in o&&(a.__data__=o.__data__),c[f]=a);return new q(n,this._parents)},selectAll:function(e){var t;"function"!=typeof e&&(e=null==(t=e)?c:function(){return this.querySelectorAll(t)});for(var r=this._groups,n=r.length,i=[],o=[],a=0;a<n;++a)for(var s,u=r[a],l=u.length,f=0;f<l;++f)(s=u[f])&&(i.push(e.call(s,s.__data__,f,u)),o.push(s));return new q(i,o)},filter:function(e){"function"!=typeof e&&(e=d(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var o,a=t[i],s=a.length,u=n[i]=[],l=0;l<s;++l)(o=a[l])&&e.call(o,o.__data__,l,a)&&u.push(o);return new q(n,this._parents)},data:function(e,t){if(!e)return d=new Array(this.size()),c=-1,this.each(function(e){d[++c]=e}),d;var r,n=t?w:y,i=this._parents,o=this._groups;"function"!=typeof e&&(r=e,e=function(){return r});for(var a=o.length,s=new Array(a),u=new Array(a),l=new Array(a),c=0;c<a;++c){var f=i[c],h=o[c],p=h.length,d=e.call(f,f&&f.__data__,c,i),v=d.length,m=u[c]=new Array(v),g=s[c]=new Array(v);n(f,h,m,g,l[c]=new Array(p),d,t);for(var b,_,x=0,S=0;x<v;++x)if(b=m[x]){for(x>=S&&(S=x+1);!(_=g[S])&&++S<v;);b._next=_||null}}return(s=new q(s,i))._enter=u,s._exit=l,s},enter:function(){return new q(this._enter||this._groups.map(v),this._parents)},exit:function(){return new q(this._exit||this._groups.map(v),this._parents)},merge:function(e){for(var t=this._groups,r=e._groups,n=t.length,i=r.length,o=Math.min(n,i),a=new Array(n),s=0;s<o;++s)for(var u,l=t[s],c=r[s],f=l.length,h=a[s]=new Array(f),p=0;p<f;++p)(u=l[p]||c[p])&&(h[p]=u);for(;s<n;++s)a[s]=t[s];return new q(a,this._parents)},order:function(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n,i=e[t],o=i.length-1,a=i[o];--o>=0;)(n=i[o])&&(a&&a!==n.nextSibling&&a.parentNode.insertBefore(n,a),a=n);return this},sort:function(e){function t(t,r){return t&&r?e(t.__data__,r.__data__):!t-!r}e||(e=b);for(var r=this._groups,n=r.length,i=new Array(n),o=0;o<n;++o){for(var a,s=r[o],u=s.length,l=i[o]=new Array(u),c=0;c<u;++c)(a=s[c])&&(l[c]=a);l.sort(t)}return new q(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){var e=new Array(this.size()),t=-1;return this.each(function(){e[++t]=this}),e},node:function(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],i=0,o=n.length;i<o;++i){var a=n[i];if(a)return a}return null},size:function(){var e=0;return this.each(function(){++e}),e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var i,o=t[r],a=0,s=o.length;a<s;++a)(i=o[a])&&e.call(i,i.__data__,a,o);return this},attr:function(e,t){var r=a(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((null==t?r.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}}:"function"==typeof t?r.local?function(e,t){return function(){var r=t.apply(this,arguments);null==r?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}:function(e,t){return function(){var r=t.apply(this,arguments);null==r?this.removeAttribute(e):this.setAttribute(e,r)}}:r.local?function(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}:function(e,t){return function(){this.setAttribute(e,t)}})(r,t))},style:function(e,t,r){return arguments.length>1?this.each((null==t?function(e){return function(){this.style.removeProperty(e)}}:"function"==typeof t?function(e,t,r){return function(){var n=t.apply(this,arguments);null==n?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}:function(e,t,r){return function(){this.style.setProperty(e,t,r)}})(e,t,null==r?"":r)):function(e,t){return e.style.getPropertyValue(t)||_(e).getComputedStyle(e,null).getPropertyValue(t)}(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?function(e){return function(){delete this[e]}}:"function"==typeof t?function(e,t){return function(){var r=t.apply(this,arguments);null==r?delete this[e]:this[e]=r}}:function(e,t){return function(){this[e]=t}})(e,t)):this.node()[e]},classed:function(e,t){var r=x(e+"");if(arguments.length<2){for(var n=S(this.node()),i=-1,o=r.length;++i<o;)if(!n.contains(r[i]))return!1;return!0}return this.each(("function"==typeof t?function(e,t){return function(){(t.apply(this,arguments)?E:j)(this,e)}}:t?function(e){return function(){E(this,e)}}:function(e){return function(){j(this,e)}})(r,t))},text:function(e){return arguments.length?this.each(null==e?A:("function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}:function(e){return function(){this.textContent=e}})(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?O:("function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(e){return function(){this.innerHTML=e}})(e)):this.node().innerHTML},raise:function(){return this.each(C)},lower:function(){return this.each(z)},append:function(e){var t="function"==typeof e?e:s(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var r="function"==typeof e?e:s(e),n=null==t?N:"function"==typeof t?t:l(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})},remove:function(){return this.each(T)},clone:function(e){return this.select(e?I:$)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,r){var n,i,o=function(e){return e.trim().split(/^|\s+/).map(function(e){var t="",r=e.indexOf(".");return r>=0&&(t=e.slice(r+1),e=e.slice(0,r)),{type:e,name:t}})}(e+""),a=o.length;if(!(arguments.length<2)){for(s=t?B:L,null==r&&(r=!1),n=0;n<a;++n)this.each(s(o[n],t,r));return this}var s=this.node().__on;if(s)for(var u,l=0,c=s.length;l<c;++l)for(n=0,u=s[l];n<a;++n)if((i=o[n]).type===u.type&&i.name===u.name)return u.value},dispatch:function(e,t){return this.each(("function"==typeof t?function(e,t){return function(){return V(this,e,t.apply(this,arguments))}}:function(e,t){return function(){return V(this,e,t)}})(e,t))}};var W=/("(?:[^\\"]|\\.)*")|[:,\][}{]/g;function X(e,t,r){return t in e?e[t]:r}var H=function(e,t){t=t||{};var r=JSON.stringify([1],null,X(t,"indent",2)).slice(2,-3),n=X(t,"margins",!1),i=""===r?1/0:X(t,"maxLength",80);return function e(t,o,a){t&&"function"==typeof t.toJSON&&(t=t.toJSON());var s=JSON.stringify(t);if(void 0===s)return s;var u=i-o.length-a;if(s.length<=u){var l=function(e,t){var r=t?" ":"",n={"{":"{"+r,"[":"["+r,"}":r+"}","]":r+"]",",":", ",":":": "};return e.replace(W,function(e,t){return t?e:n[e]})}(s,n);if(l.length<=u)return l}if("object"==typeof t&&null!==t){var c,f=o+r,h=[],p=function(e,t){return t===e.length-1?0:1};if(Array.isArray(t)){for(var d=0;d<t.length;d++)h.push(e(t[d],f,p(t,d))||"null");c="[]"}else Object.keys(t).forEach(function(r,n,i){var o=JSON.stringify(r)+": ",a=e(t[r],f,o.length+p(i,n));void 0!==a&&h.push(o+a)}),c="{}";if(h.length>0)return[c[0],r+h.join(",\n"+f),c[1]].join("\n"+o)}return s}(e,"",0)},J=Object.freeze({default:H,__moduleExports:H});function U(e,t){return e(t={exports:{}},t.exports),t.exports}var Y,G=U(function(e,t){var r;t=e.exports=J,r="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var n=256,i=Number.MAX_SAFE_INTEGER||9007199254740991,o=t.re=[],a=t.src=[],s=0,u=s++;a[u]="0|[1-9]\\d*";var l=s++;a[l]="[0-9]+";var c=s++;a[c]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var f=s++;a[f]="("+a[u]+")\\.("+a[u]+")\\.("+a[u]+")";var h=s++;a[h]="("+a[l]+")\\.("+a[l]+")\\.("+a[l]+")";var p=s++;a[p]="(?:"+a[u]+"|"+a[c]+")";var d=s++;a[d]="(?:"+a[l]+"|"+a[c]+")";var v=s++;a[v]="(?:-("+a[p]+"(?:\\."+a[p]+")*))";var m=s++;a[m]="(?:-?("+a[d]+"(?:\\."+a[d]+")*))";var g=s++;a[g]="[0-9A-Za-z-]+";var y=s++;a[y]="(?:\\+("+a[g]+"(?:\\."+a[g]+")*))";var w=s++,b="v?"+a[f]+a[v]+"?"+a[y]+"?";a[w]="^"+b+"$";var _="[v=\\s]*"+a[h]+a[m]+"?"+a[y]+"?",x=s++;a[x]="^"+_+"$";var S=s++;a[S]="((?:<|>)?=?)";var k=s++;a[k]=a[l]+"|x|X|\\*";var E=s++;a[E]=a[u]+"|x|X|\\*";var j=s++;a[j]="[v=\\s]*("+a[E]+")(?:\\.("+a[E]+")(?:\\.("+a[E]+")(?:"+a[v]+")?"+a[y]+"?)?)?";var A=s++;a[A]="[v=\\s]*("+a[k]+")(?:\\.("+a[k]+")(?:\\.("+a[k]+")(?:"+a[m]+")?"+a[y]+"?)?)?";var O=s++;a[O]="^"+a[S]+"\\s*"+a[j]+"$";var C=s++;a[C]="^"+a[S]+"\\s*"+a[A]+"$";var z=s++;a[z]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var N=s++;a[N]="(?:~>?)";var T=s++;a[T]="(\\s*)"+a[N]+"\\s+",o[T]=new RegExp(a[T],"g");var $=s++;a[$]="^"+a[N]+a[j]+"$";var I=s++;a[I]="^"+a[N]+a[A]+"$";var P=s++;a[P]="(?:\\^)";var R=s++;a[R]="(\\s*)"+a[P]+"\\s+",o[R]=new RegExp(a[R],"g");var D=s++;a[D]="^"+a[P]+a[j]+"$";var F=s++;a[F]="^"+a[P]+a[A]+"$";var L=s++;a[L]="^"+a[S]+"\\s*("+_+")$|^$";var B=s++;a[B]="^"+a[S]+"\\s*("+b+")$|^$";var V=s++;a[V]="(\\s*)"+a[S]+"\\s*("+_+"|"+a[j]+")",o[V]=new RegExp(a[V],"g");var M=s++;a[M]="^\\s*("+a[j]+")\\s+-\\s+("+a[j]+")\\s*$";var q=s++;a[q]="^\\s*("+a[A]+")\\s+-\\s+("+a[A]+")\\s*$";var W=s++;a[W]="(<|>)?=?\\s*\\*";for(var X=0;X<s;X++)r(X,a[X]),o[X]||(o[X]=new RegExp(a[X]));function H(e,t){if(e instanceof J)return e;if("string"!=typeof e)return null;if(e.length>n)return null;if(!(t?o[x]:o[w]).test(e))return null;try{return new J(e,t)}catch(e){return null}}function J(e,t){if(e instanceof J){if(e.loose===t)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof J))return new J(e,t);r("SemVer",e,t),this.loose=t;var a=e.trim().match(t?o[x]:o[w]);if(!a)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+a[1],this.minor=+a[2],this.patch=+a[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");a[4]?this.prerelease=a[4].split(".").map(function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<i)return t}return e}):this.prerelease=[],this.build=a[5]?a[5].split("."):[],this.format()}t.parse=H,t.valid=function(e,t){var r=H(e,t);return r?r.version:null},t.clean=function(e,t){var r=H(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null},t.SemVer=J,J.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},J.prototype.toString=function(){return this.version},J.prototype.compare=function(e){return r("SemVer.compare",this.version,this.loose,e),e instanceof J||(e=new J(e,this.loose)),this.compareMain(e)||this.comparePre(e)},J.prototype.compareMain=function(e){return e instanceof J||(e=new J(e,this.loose)),Y(this.major,e.major)||Y(this.minor,e.minor)||Y(this.patch,e.patch)},J.prototype.comparePre=function(e){if(e instanceof J||(e=new J(e,this.loose)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var n=this.prerelease[t],i=e.prerelease[t];if(r("prerelease compare",t,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return Y(n,i)}while(++t)},J.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);-1===r&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=function(e,t,r,n){"string"==typeof r&&(n=r,r=void 0);try{return new J(e,r).inc(t,n).version}catch(e){return null}},t.diff=function(e,t){if(Q(e,t))return null;var r=H(e),n=H(t);if(r.prerelease.length||n.prerelease.length){for(var i in r)if(("major"===i||"minor"===i||"patch"===i)&&r[i]!==n[i])return"pre"+i;return"prerelease"}for(var i in r)if(("major"===i||"minor"===i||"patch"===i)&&r[i]!==n[i])return i},t.compareIdentifiers=Y;var U=/^[0-9]+$/;function Y(e,t){var r=U.test(e),n=U.test(t);return r&&n&&(e=+e,t=+t),r&&!n?-1:n&&!r?1:e<t?-1:e>t?1:0}function G(e,t,r){return new J(e,r).compare(new J(t,r))}function Z(e,t,r){return G(e,t,r)>0}function K(e,t,r){return G(e,t,r)<0}function Q(e,t,r){return 0===G(e,t,r)}function ee(e,t,r){return 0!==G(e,t,r)}function te(e,t,r){return G(e,t,r)>=0}function re(e,t,r){return G(e,t,r)<=0}function ne(e,t,r,n){var i;switch(t){case"===":"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),i=e===r;break;case"!==":"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),i=e!==r;break;case"":case"=":case"==":i=Q(e,r,n);break;case"!=":i=ee(e,r,n);break;case">":i=Z(e,r,n);break;case">=":i=te(e,r,n);break;case"<":i=K(e,r,n);break;case"<=":i=re(e,r,n);break;default:throw new TypeError("Invalid operator: "+t)}return i}function ie(e,t){if(e instanceof ie){if(e.loose===t)return e;e=e.value}if(!(this instanceof ie))return new ie(e,t);r("comparator",e,t),this.loose=t,this.parse(e),this.semver===oe?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}t.rcompareIdentifiers=function(e,t){return Y(t,e)},t.major=function(e,t){return new J(e,t).major},t.minor=function(e,t){return new J(e,t).minor},t.patch=function(e,t){return new J(e,t).patch},t.compare=G,t.compareLoose=function(e,t){return G(e,t,!0)},t.rcompare=function(e,t,r){return G(t,e,r)},t.sort=function(e,r){return e.sort(function(e,n){return t.compare(e,n,r)})},t.rsort=function(e,r){return e.sort(function(e,n){return t.rcompare(e,n,r)})},t.gt=Z,t.lt=K,t.eq=Q,t.neq=ee,t.gte=te,t.lte=re,t.cmp=ne,t.Comparator=ie;var oe={};function ae(e,t){if(e instanceof ae)return e.loose===t?e:new ae(e.raw,t);if(e instanceof ie)return new ae(e.value,t);if(!(this instanceof ae))return new ae(e,t);if(this.loose=t,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(function(e){return this.parseRange(e.trim())},this).filter(function(e){return e.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function se(e){return!e||"x"===e.toLowerCase()||"*"===e}function ue(e,t,r,n,i,o,a,s,u,l,c,f,h){return((t=se(r)?"":se(n)?">="+r+".0.0":se(i)?">="+r+"."+n+".0":">="+t)+" "+(s=se(u)?"":se(l)?"<"+(+u+1)+".0.0":se(c)?"<"+u+"."+(+l+1)+".0":f?"<="+u+"."+l+"."+c+"-"+f:"<="+s)).trim()}function le(e,t){for(var n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length){for(n=0;n<e.length;n++)if(r(e[n].semver),e[n].semver!==oe&&e[n].semver.prerelease.length>0){var i=e[n].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}function ce(e,t,r){try{t=new ae(t,r)}catch(e){return!1}return t.test(e)}function fe(e,t,r,n){var i,o,a,s,u;switch(e=new J(e,n),t=new ae(t,n),r){case">":i=Z,o=re,a=K,s=">",u=">=";break;case"<":i=K,o=te,a=Z,s="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(ce(e,t,n))return!1;for(var l=0;l<t.set.length;++l){var c=null,f=null;if(t.set[l].forEach(function(e){e.semver===oe&&(e=new ie(">=0.0.0")),c=c||e,f=f||e,i(e.semver,c.semver,n)?c=e:a(e.semver,f.semver,n)&&(f=e)}),c.operator===s||c.operator===u)return!1;if((!f.operator||f.operator===s)&&o(e,f.semver))return!1;if(f.operator===u&&a(e,f.semver))return!1}return!0}ie.prototype.parse=function(e){var t=this.loose?o[L]:o[B],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=r[1],"="===this.operator&&(this.operator=""),r[2]?this.semver=new J(r[2],this.loose):this.semver=oe},ie.prototype.toString=function(){return this.value},ie.prototype.test=function(e){return r("Comparator.test",e,this.loose),this.semver===oe||("string"==typeof e&&(e=new J(e,this.loose)),ne(e,this.operator,this.semver,this.loose))},ie.prototype.intersects=function(e,t){if(!(e instanceof ie))throw new TypeError("a Comparator is required");var r;if(""===this.operator)return r=new ae(e.value,t),ce(this.value,r,t);if(""===e.operator)return r=new ae(this.value,t),ce(e.semver,r,t);var n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),o=this.semver.version===e.semver.version,a=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),s=ne(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),u=ne(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||i||o&&a||s||u},t.Range=ae,ae.prototype.format=function(){return this.range=this.set.map(function(e){return e.join(" ").trim()}).join("||").trim(),this.range},ae.prototype.toString=function(){return this.range},ae.prototype.parseRange=function(e){var t=this.loose;e=e.trim(),r("range",e,t);var n=t?o[q]:o[M];e=e.replace(n,ue),r("hyphen replace",e),e=e.replace(o[V],"$1$2$3"),r("comparator trim",e,o[V]),e=(e=(e=e.replace(o[T],"$1~")).replace(o[R],"$1^")).split(/\s+/).join(" ");var i=t?o[L]:o[B],a=e.split(" ").map(function(e){return function(e,t){return r("comp",e),e=function(e,t){return e.trim().split(/\s+/).map(function(e){return function(e,t){r("caret",e,t);var n=t?o[F]:o[D];return e.replace(n,function(t,n,i,o,a){var s;return r("caret",e,t,n,i,o,a),se(n)?s="":se(i)?s=">="+n+".0.0 <"+(+n+1)+".0.0":se(o)?s="0"===n?">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0":">="+n+"."+i+".0 <"+(+n+1)+".0.0":a?(r("replaceCaret pr",a),"-"!==a.charAt(0)&&(a="-"+a),s="0"===n?"0"===i?">="+n+"."+i+"."+o+a+" <"+n+"."+i+"."+(+o+1):">="+n+"."+i+"."+o+a+" <"+n+"."+(+i+1)+".0":">="+n+"."+i+"."+o+a+" <"+(+n+1)+".0.0"):(r("no pr"),s="0"===n?"0"===i?">="+n+"."+i+"."+o+" <"+n+"."+i+"."+(+o+1):">="+n+"."+i+"."+o+" <"+n+"."+(+i+1)+".0":">="+n+"."+i+"."+o+" <"+(+n+1)+".0.0"),r("caret return",s),s})}(e,t)}).join(" ")}(e,t),r("caret",e),e=function(e,t){return e.trim().split(/\s+/).map(function(e){return function(e,t){var n=t?o[I]:o[$];return e.replace(n,function(t,n,i,o,a){var s;return r("tilde",e,t,n,i,o,a),se(n)?s="":se(i)?s=">="+n+".0.0 <"+(+n+1)+".0.0":se(o)?s=">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0":a?(r("replaceTilde pr",a),"-"!==a.charAt(0)&&(a="-"+a),s=">="+n+"."+i+"."+o+a+" <"+n+"."+(+i+1)+".0"):s=">="+n+"."+i+"."+o+" <"+n+"."+(+i+1)+".0",r("tilde return",s),s})}(e,t)}).join(" ")}(e,t),r("tildes",e),e=function(e,t){return r("replaceXRanges",e,t),e.split(/\s+/).map(function(e){return function(e,t){e=e.trim();var n=t?o[C]:o[O];return e.replace(n,function(t,n,i,o,a,s){r("xRange",e,t,n,i,o,a,s);var u=se(i),l=u||se(o),c=l||se(a),f=c;return"="===n&&f&&(n=""),u?t=">"===n||"<"===n?"<0.0.0":"*":n&&f?(l&&(o=0),c&&(a=0),">"===n?(n=">=",l?(i=+i+1,o=0,a=0):c&&(o=+o+1,a=0)):"<="===n&&(n="<",l?i=+i+1:o=+o+1),t=n+i+"."+o+"."+a):l?t=">="+i+".0.0 <"+(+i+1)+".0.0":c&&(t=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0"),r("xRange return",t),t})}(e,t)}).join(" ")}(e,t),r("xrange",e),e=function(e,t){return r("replaceStars",e,t),e.trim().replace(o[W],"")}(e,t),r("stars",e),e}(e,t)}).join(" ").split(/\s+/);return this.loose&&(a=a.filter(function(e){return!!e.match(i)})),a=a.map(function(e){return new ie(e,t)})},ae.prototype.intersects=function(e,t){if(!(e instanceof ae))throw new TypeError("a Range is required");return this.set.some(function(r){return r.every(function(r){return e.set.some(function(e){return e.every(function(e){return r.intersects(e,t)})})})})},t.toComparators=function(e,t){return new ae(e,t).set.map(function(e){return e.map(function(e){return e.value}).join(" ").trim().split(" ")})},ae.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new J(e,this.loose));for(var t=0;t<this.set.length;t++)if(le(this.set[t],e))return!0;return!1},t.satisfies=ce,t.maxSatisfying=function(e,t,r){var n=null,i=null;try{var o=new ae(t,r)}catch(e){return null}return e.forEach(function(e){o.test(e)&&(n&&-1!==i.compare(e)||(i=new J(n=e,r)))}),n},t.minSatisfying=function(e,t,r){var n=null,i=null;try{var o=new ae(t,r)}catch(e){return null}return e.forEach(function(e){o.test(e)&&(n&&1!==i.compare(e)||(i=new J(n=e,r)))}),n},t.validRange=function(e,t){try{return new ae(e,t).range||"*"}catch(e){return null}},t.ltr=function(e,t,r){return fe(e,t,"<",r)},t.gtr=function(e,t,r){return fe(e,t,">",r)},t.outside=fe,t.prerelease=function(e,t){var r=H(e,t);return r&&r.prerelease.length?r.prerelease:null},t.intersects=function(e,t,r){return e=new ae(e,r),t=new ae(t,r),e.intersects(t)},t.coerce=function(e){if(e instanceof J)return e;if("string"!=typeof e)return null;var t=e.match(o[z]);return null==t?null:H((t[1]||"0")+"."+(t[2]||"0")+"."+(t[3]||"0"))}}),Z=(G.SEMVER_SPEC_VERSION,G.re,G.src,G.parse,G.valid,G.clean,G.SemVer,G.inc,G.diff,G.compareIdentifiers,G.rcompareIdentifiers,G.major,G.minor,G.patch,G.compare,G.compareLoose,G.rcompare,G.sort,G.rsort,G.gt,G.lt,G.eq,G.neq,G.gte,G.lte,G.cmp,G.Comparator,G.Range,G.toComparators,G.satisfies),K=(G.maxSatisfying,G.minSatisfying,G.validRange,G.ltr,G.gtr,G.outside,G.prerelease,G.intersects,G.coerce,U(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=/\/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t[0],version:t[1]}}})),Q=(Y=K)&&Y.__esModule&&Object.prototype.hasOwnProperty.call(Y,"default")?Y.default:Y,ee={background:"#fff",arc:{fill:"#4572a7"},area:{fill:"#4572a7"},line:{stroke:"#4572a7",strokeWidth:2},path:{stroke:"#4572a7"},rect:{fill:"#4572a7"},shape:{stroke:"#4572a7"},symbol:{fill:"#4572a7",strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},te={group:{fill:"#e5e5e5"},arc:{fill:"#000"},area:{fill:"#000"},line:{stroke:"#000"},path:{stroke:"#000"},rect:{fill:"#000"},shape:{stroke:"#000"},symbol:{fill:"#000",size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},re={background:"#f9f9f9",arc:{fill:"#ab5787"},area:{fill:"#ab5787"},line:{stroke:"#ab5787"},path:{stroke:"#ab5787"},rect:{fill:"#ab5787"},shape:{stroke:"#ab5787"},symbol:{fill:"#ab5787",size:30},axis:{domainColor:"#979797",domainWidth:.5,gridWidth:.2,labelColor:"#979797",tickColor:"#979797",tickWidth:.2,titleColor:"#979797"},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},ne={background:"#fff",arc:{fill:"#3e5c69"},area:{fill:"#3e5c69"},line:{stroke:"#3e5c69"},path:{stroke:"#3e5c69"},rect:{fill:"#3e5c69"},shape:{stroke:"#3e5c69"},symbol:{fill:"#3e5c69"},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},ie={background:"#333",title:{color:"#fff"},style:{"guide-label":{fill:"#fff"},"guide-title":{fill:"#fff"}},axis:{domainColor:"#fff",gridColor:"#aaa",tickColor:"#fff"}},oe=Object.freeze({excel:ee,ggplot2:te,quartz:re,vox:ne,dark:ie}),ae={offsetX:10,offsetY:10,id:"vg-tooltip-element",styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:se};function se(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function ue(e,t,r){return e.fields=t||[],e.fname=r,e}function le(e){throw Error(e)}var ce=Array.isArray;function fe(e){return e===Object(e)}function he(e){return"string"==typeof e}function pe(e){return ce(e)?"["+e.map(pe)+"]":fe(e)||he(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}var de=[],ve=(function(e,t){var r=function(e){var t,r,n,i=[],o=null,a=0,s=e.length,u="";function l(){i.push(u+e.substring(t,r)),u="",t=r+1}for(e+="",t=r=0;r<s;++r)if("\\"===(n=e[r]))u+=e.substring(t,r),t=++r;else if(n===o)l(),o=null,a=-1;else{if(o)continue;t===a&&'"'===n?(t=r+1,o=n):t===a&&"'"===n?(t=r+1,o=n):"."!==n||a?"["===n?(r>t&&l(),a=t=r+1):"]"===n&&(a||le("Access path missing open bracket: "+e),a>0&&l(),a=0,t=r+1):r>t?l():t=r+1}return a&&le("Access path missing closing bracket: "+e),o&&le("Access path missing closing quote: "+e),r>t&&(r++,l()),i}(e),n="return _["+r.map(pe).join("][")+"];";ue(Function("_",n),[e=1===r.length?r[0]:e],t||e)}("id"),ue(function(e){return e},de,"identity"),ue(function(){return 0},de,"zero"),ue(function(){return 1},de,"one"),ue(function(){return!0},de,"true"),ue(function(){return!1},de,"false"),U(function(e,t){function r(e,t){var r=[],n=[];return null==t&&(t=function(e,t){return r[0]===t?"[Circular ~]":"[Circular ~."+n.slice(0,r.indexOf(t)).join(".")+"]"}),function(i,o){if(r.length>0){var a=r.indexOf(this);~a?r.splice(a+1):r.push(this),~a?n.splice(a,1/0,i):n.push(i),~r.indexOf(o)&&(o=t.call(this,i,o))}else r.push(o);return null==e?o:e.call(this,i,o)}}(e.exports=function(e,t,n,i){return JSON.stringify(e,r(t,i),n)}).getSerialize=r})),me=ve.getSerialize,ge=ve||Object.freeze({default:ve,__moduleExports:ve,getSerialize:me});function ye(e,t){if(ce(e))return"["+e.map(function(e){return t(he(e)?e:ge(e))}).join(", ")+"]";if(fe(e)){var r="",n=e,i=n.title,o=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&(r[n[i]]=e[n[i]])}return r}(n,["title"]);i&&(r+="<h2>"+t(i)+"</h2>"),r+="<table>";for(var a=0,s=Object.keys(o);a<s.length;a++){var u=s[a],l=o[u];fe(l)&&(l=ge(l)),r+='<tr><td class="key">'+t(u)+':</td><td class="value">'+t(l)+"</td></tr>"}return r+="</table>"}return t(e)}var we=function(){function e(e){this.options=r({},ae,e);var t=this.options.id;if(this.call=this.tooltip_handler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){var n=document.createElement("style");n.setAttribute("id",this.options.styleId),n.innerHTML=function(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return"\n#"+e+" {\n  visibility: hidden;\n  padding: 8px;\n  position: fixed;\n  z-index: 1000;\n  font-family: sans-serif;\n  font-size: 11px;\n  border-radius: 3px;\n  box-shadow: 2px 2px 4px rgba(0,0,0,0.1);\n\n  /* The default theme is the light theme. */\n  background-color: rgba(255, 255, 255, 0.95);\n  border: 1px solid #d9d9d9;\n  color: black;\n}\n#"+e+".visible {\n  visibility: visible;\n}\n#"+e+" h2 {\n  margin-top: 0;\n  margin-bottom: 10px;\n  font-size: 13px;\n}\n#"+e+" table {\n  border-spacing: 0;\n}\n#"+e+" td {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-top: 2px;\n  padding-bottom: 2px;\n}\n#"+e+" td.key {\n  color: #808080;\n  max-width: 150px;\n  text-align: right;\n  padding-right: 4px;\n}\n#"+e+" td.value {\n  max-width: 200px;\n  text-align: left;\n}\n\n/* Dark and light color themes */\n#"+e+".dark-theme {\n  background-color: rgba(32, 32, 32, 0.9);\n  border: 1px solid #f5f5f5;\n  color: white;\n}\n#"+e+".dark-theme td.key {\n  color: #bfbfbf;\n}\n\n#"+e+".light-theme {\n  background-color: rgba(255, 255, 255, 0.95);\n  border: 1px solid #d9d9d9;\n  color: black;\n}\n#"+e+".light-theme td.key {\n  color: #808080;\n}\n"}(t),document.head.childNodes.length>0?document.head.insertBefore(n,document.head.childNodes[0]):document.head.appendChild(n)}this.el=document.getElementById(t),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",t),this.el.classList.add("vg-tooltip"),document.body.appendChild(this.el))}return e.prototype.tooltip_handler=function(e,t,r,n){if(null!=n&&""!==n){this.el.innerHTML=ye(n,se),this.el.classList.add("visible",this.options.theme+"-theme");var i=function(e,t,r,n){var i=e.clientX+r;i+t.width>window.innerWidth&&(i=+e.clientX-r-t.width);var o=e.clientY+n;return o+t.height>window.innerHeight&&(o=+e.clientY-n-t.height),{x:i,y:o}}(t,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY),o=i.x,a=i.y;this.el.setAttribute("style","top: "+a+"px; left: "+o+"px")}else this.el.classList.remove("visible",this.options.theme+"-theme")},e}();function be(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var n=0,i=t;n<i.length;n++){e=_e(e,i[n])}return e}function _e(e,t){if("object"!=typeof t||null===t)return e;for(var r in t)t.hasOwnProperty(r)&&void 0!==t[r]&&("object"!=typeof t[r]||ce(t[r])||null===t[r]?e[r]=t[r]:"object"!=typeof e[r]||null===e[r]?e[r]=be(ce(t[r].constructor)?[]:{},t[r]):be(e[r],t[r]));return e}var xe=H||J,Se=e,ke=t,Ee={vega:"Vega","vega-lite":"Vega-Lite"},je={vega:Se.version,"vega-lite":ke?ke.version:"not available"},Ae={vega:function(e,t){return e},"vega-lite":function(e,t){return ke.compile(e,{config:t}).spec}};function Oe(e,t,r,n){var i="<html><he"+"ad>"+t+'</head><body><pre><code class="json">',o="</code></pre>"+r+"</body></html>",a=window.open("");a.document.write(i+e+o),a.document.title=Ee[n]+" JSON Source"}function Ce(e,t,i){return o=this,a=void 0,u=function(){var o,a,s,u,l,c,f,h,p,d,v,m,g,y,w,b;return n(this,function(n){switch(n.label){case 0:return o=!0===(i=i||{}).actions||!1===i.actions?i.actions:r({export:!0,source:!0,compiled:!1,editor:!0},i.actions||{}),a=i.loader||Se.loader(),s=i.renderer||"canvas",u=i.logLevel||Se.Warn,Se.isString(t)?[4,a.load(t)]:[3,2];case 1:return c=n.sent(),[2,Ce(e,JSON.parse(c),i)];case 2:return l=i.config||{},Se.isString(l)?[4,a.load(l)]:[3,4];case 3:return c=n.sent(),[2,Ce(e,t,r({},i,{config:JSON.parse(c)}))];case 4:return i.theme&&(l=be({},oe[i.theme],l)),t.$schema?(f=Q(t.$schema),i.mode&&i.mode!==f.library&&console.warn("The given visualization spec is written in "+Ee[f.library]+", but mode argument sets "+Ee[i.mode]+"."),h=f.library,Z(je[h],"^"+f.version.slice(1))||console.warn("The input spec uses "+h+" "+f.version+", but the current version of "+Ee[h]+" is "+je[h]+".")):h=i.mode||"vega",p=Ae[h](t,l),"vega-lite"===h&&p.$schema&&(f=Q(p.$schema),Z(je.vega,"^"+f.version.slice(1))||console.warn("The compiled spec uses Vega "+f.version+", but current version is "+je.vega+".")),d=(x=e,"string"==typeof x?new q([[document.querySelector(x)]],[document.documentElement]):new q([[x]],M)).classed("vega-embed",!0).html(""),i.onBeforeParse&&(p=i.onBeforeParse(p)),v=Se.parse(p,"vega-lite"===h?{}:l),m=new Se.View(v,{loader:a,logLevel:u,renderer:s}).initialize(e),!1!==i.tooltip&&(g=void 0,_=i.tooltip,g="function"==typeof _?i.tooltip:new we(!0===i.tooltip?{}:i.tooltip).call,m.tooltip(g)),(void 0===i.hover?"vega-lite"!==h:i.hover)&&m.hover(),i&&(i.width&&m.width(i.width),i.height&&m.height(i.height),i.padding&&m.padding(i.padding)),i.runAsync?[4,m.runAsync()]:[3,6];case 5:return n.sent(),[3,7];case 6:m.run(),n.label=7;case 7:return!1!==o&&(y=d.append("div").attr("class","vega-actions"),!0!==o&&!1===o.export||(w="canvas"===s?"png":"svg",y.append("a").text("Export as "+w.toUpperCase()).attr("href","#").attr("target","_blank").attr("download","visualization."+w).on("mousedown",function(){var e=this;m.toImageURL(w).then(function(t){e.href=t}).catch(function(e){throw e}),R.preventDefault()})),!0!==o&&!1===o.source||y.append("a").text("View Source").attr("href","#").on("click",function(){Oe(xe(t),i.sourceHeader||"",i.sourceFooter||"",h),R.preventDefault()}),"vega-lite"!==h||!0!==o&&!1===o.compiled||y.append("a").text("View Vega").attr("href","#").on("click",function(){Oe(xe(p),i.sourceHeader||"",i.sourceFooter||"","vega"),R.preventDefault()}),!0!==o&&!1===o.editor||(b=i.editorUrl||"https://vega.github.io/editor/",y.append("a").text("Open in Vega Editor").attr("href","#").on("click",function(){!function(e,t,r){var n=e.open(t),i=250,o=~~(1e4/i);e.addEventListener("message",function t(r){r.source===n&&(o=0,e.removeEventListener("message",t,!1))},!1),setTimeout(function e(){o<=0||(n.postMessage(r,"*"),setTimeout(e,i),o-=1)},i)}(window,b,{config:l,mode:h,renderer:s,spec:xe(t)}),R.preventDefault()}))),[2,{view:m,spec:t}]}var _,x})},new((s=void 0)||(s=Promise))(function(e,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function n(e){try{i(u.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(r,n)}i((u=u.apply(o,a||[])).next())});var o,a,s,u}return Ce.vl=ke,Ce.vega=Se,Ce.default=Ce,Ce});
