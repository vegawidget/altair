!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).vegaTooltip=e()}}(function(){return function o(a,u,c){function s(n,e){if(!u[n]){if(!a[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(l)return l(n,!0);var r=new Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r}var i=u[n]={exports:{}};a[n][0].call(i.exports,function(e){var t=a[n][1][e];return s(t||e)},i,i.exports,o,a,u,c)}return u[n].exports}for(var l="function"==typeof require&&require,e=0;e<c.length;e++)s(c[e]);return s}({1:[function(e,t,n){var r;r=this,function(t){"use strict";var E,u=function(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[1<r.length?r[0]+r.slice(2):r,+e.slice(n+1)]},s=function(e){return(e=u(Math.abs(e)))?e[1]:NaN},n=function(e,t){var n=u(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},w={"":function(e,t){e:for(var n,r=(e=e.toPrecision(t)).length,i=1,o=-1;i<r;++i)switch(e[i]){case".":o=n=i;break;case"0":0===o&&(o=i),n=i;break;case"e":break e;default:0<o&&(o=0)}return 0<o?e.slice(0,o)+e.slice(n+1):e},"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return n(100*e,t)},r:n,s:function(e,t){var n=u(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(E=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:a<o?r+new Array(o-a+1).join("0"):0<o?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+u(e,Math.max(0,t+o-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}},f=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;function A(e){return new r(e)}function r(e){if(!(t=f.exec(e)))throw new Error("invalid format: "+e);var t,n=t[1]||" ",r=t[2]||">",i=t[3]||"-",o=t[4]||"",a=!!t[5],u=t[6]&&+t[6],c=!!t[7],s=t[8]&&+t[8].slice(1),l=t[9]||"";"n"===l?(c=!0,l="g"):w[l]||(l=""),(a||"0"===n&&"="===r)&&(a=!0,n="0",r="="),this.fill=n,this.align=r,this.sign=i,this.symbol=o,this.zero=a,this.width=u,this.comma=c,this.precision=s,this.type=l}A.prototype=r.prototype,r.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var i,o=function(e){return e},C=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"],a=function(e){var t,u,c,S=e.grouping&&e.thousands?(u=e.grouping,c=e.thousands,function(e,t){for(var n=e.length,r=[],i=0,o=u[0],a=0;0<n&&0<o&&(t<a+o+1&&(o=Math.max(1,t-a)),r.push(e.substring(n-=o,n+o)),!((a+=o+1)>t));)o=u[i=(i+1)%u.length];return r.reverse().join(c)}):o,r=e.currency,_=e.decimal,b=e.numerals?(t=e.numerals,function(e){return e.replace(/[0-9]/g,function(e){return t[+e]})}):o,i=e.percent||"%";function a(e){var s=(e=A(e)).fill,l=e.align,f=e.sign,t=e.symbol,d=e.zero,p=e.width,g=e.comma,h=e.precision,m=e.type,v="$"===t?r[0]:"#"===t&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",y="$"===t?r[1]:/[%p]/.test(m)?i:"",T=w[m],O=!m||/[defgprs%]/.test(m);function n(e){var t,n,r,i=v,o=y;if("c"===m)o=T(e)+o,e="";else{var a=(e=+e)<0;if(e=T(Math.abs(e),h),a&&0==+e&&(a=!1),i=(a?"("===f?f:"-":"-"===f||"("===f?"":f)+i,o=("s"===m?C[8+E/3]:"")+o+(a&&"("===f?")":""),O)for(t=-1,n=e.length;++t<n;)if((r=e.charCodeAt(t))<48||57<r){o=(46===r?_+e.slice(t+1):e.slice(t))+o,e=e.slice(0,t);break}}g&&!d&&(e=S(e,1/0));var u=i.length+e.length+o.length,c=u<p?new Array(p-u+1).join(s):"";switch(g&&d&&(e=S(c+e,c.length?p-o.length:1/0),c=""),l){case"<":e=i+e+o+c;break;case"=":e=i+c+e+o;break;case"^":e=c.slice(0,u=c.length>>1)+i+e+o+c.slice(u);break;default:e=c+i+e+o}return b(e)}return h=null==h?m?6:12:/[gprs]/.test(m)?Math.max(1,Math.min(21,h)):Math.max(0,Math.min(20,h)),n.toString=function(){return e+""},n}return{format:a,formatPrefix:function(e,t){var n=a(((e=A(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(s(t)/3))),i=Math.pow(10,-r),o=C[8+r/3];return function(e){return n(i*e)+o}}}};function e(e){return i=a(e),t.format=i.format,t.formatPrefix=i.formatPrefix,i}e({decimal:".",thousands:",",grouping:[3],currency:["$",""]});t.formatDefaultLocale=e,t.formatLocale=a,t.formatSpecifier=A,t.precisionFixed=function(e){return Math.max(0,-s(Math.abs(e)))},t.precisionPrefix=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(s(t)/3)))-s(Math.abs(e)))},t.precisionRound=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,s(t)-s(e))+1},Object.defineProperty(t,"__esModule",{value:!0})}("object"==typeof n&&void 0!==t?n:r.d3=r.d3||{})},{}],2:[function(e,t,n){var r;r=this,function(o){"use strict";var r="http://www.w3.org/1999/xhtml",i={svg:"http://www.w3.org/2000/svg",xhtml:r,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function a(e){var t=e+="",n=t.indexOf(":");return 0<=n&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),i.hasOwnProperty(t)?{space:i[t],local:e}:e}function u(e){var t=a(e);return(t.local?function(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}:function(n){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===r&&e.documentElement.namespaceURI===r?e.createElement(n):e.createElementNS(t,n)}})(t)}function t(){}function f(e){return null==e?t:function(){return this.querySelector(e)}}function n(){return[]}function l(e){return null==e?n:function(){return this.querySelectorAll(e)}}var e=function(e){return function(){return this.matches(e)}};if("undefined"!=typeof document){var c=document.documentElement;if(!c.matches){var s=c.webkitMatchesSelector||c.msMatchesSelector||c.mozMatchesSelector||c.oMatchesSelector;e=function(e){return function(){return s.call(this,e)}}}}var d=e;function p(e){return new Array(e.length)}function g(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}g.prototype={constructor:g,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var h="$";function _(e,t,n,r,i,o){for(var a,u=0,c=t.length,s=o.length;u<s;++u)(a=t[u])?(a.__data__=o[u],r[u]=a):n[u]=new g(e,o[u]);for(;u<c;++u)(a=t[u])&&(i[u]=a)}function b(e,t,n,r,i,o,a){var u,c,s,l={},f=t.length,d=o.length,p=new Array(f);for(u=0;u<f;++u)(c=t[u])&&(p[u]=s=h+a.call(c,c.__data__,u,t),s in l?i[u]=c:l[s]=c);for(u=0;u<d;++u)(c=l[s=h+a.call(e,o[u],u,o)])?((r[u]=c).__data__=o[u],l[s]=null):n[u]=new g(e,o[u]);for(u=0;u<f;++u)(c=t[u])&&l[p[u]]===c&&(i[u]=c)}function m(e,t){return e<t?-1:t<e?1:t<=e?0:NaN}function v(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function y(e,t){return e.style.getPropertyValue(t)||v(e).getComputedStyle(e,null).getPropertyValue(t)}function T(e){return e.trim().split(/^|\s+/)}function O(e){return e.classList||new S(e)}function S(e){this._node=e,this._names=T(e.getAttribute("class")||"")}function E(e,t){for(var n=O(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function w(e,t){for(var n=O(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function A(){this.textContent=""}function C(){this.innerHTML=""}function N(){this.nextSibling&&this.parentNode.appendChild(this)}function D(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function M(){return null}function x(){var e=this.parentNode;e&&e.removeChild(this)}function U(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function I(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}S.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);0<=t&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return 0<=this._names.indexOf(e)}};var L={};(o.event=null,"undefined"!=typeof document)&&("onmouseenter"in document.documentElement||(L={mouseenter:"mouseover",mouseleave:"mouseout"}));function P(n,e,t){return n=F(n,e,t),function(e){var t=e.relatedTarget;t&&(t===this||8&t.compareDocumentPosition(this))||n.call(this,e)}}function F(n,r,i){return function(e){var t=o.event;o.event=e;try{n.call(this,this.__data__,r,i)}finally{o.event=t}}}function R(o){return function(){var e=this.__on;if(e){for(var t,n=0,r=-1,i=e.length;n<i;++n)t=e[n],o.type&&t.type!==o.type||t.name!==o.name?e[++r]=t:this.removeEventListener(t.type,t.listener,t.capture);++r?e.length=r:delete this.__on}}}function k(c,s,l){var f=L.hasOwnProperty(c.type)?P:F;return function(e,t,n){var r,i=this.__on,o=f(s,t,n);if(i)for(var a=0,u=i.length;a<u;++a)if((r=i[a]).type===c.type&&r.name===c.name)return this.removeEventListener(r.type,r.listener,r.capture),this.addEventListener(r.type,r.listener=o,r.capture=l),void(r.value=s);this.addEventListener(c.type,o,l),r={type:c.type,name:c.name,value:s,listener:o,capture:l},i?i.push(r):this.__on=[r]}}function j(e,t,n){var r=v(e),i=r.CustomEvent;"function"==typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}var H=[null];function Y(e,t){this._groups=e,this._parents=t}function q(){return new Y([[document.documentElement]],H)}function z(e){return"string"==typeof e?new Y([[document.querySelector(e)]],[document.documentElement]):new Y([[e]],H)}Y.prototype=q.prototype={constructor:Y,select:function(e){"function"!=typeof e&&(e=f(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a,u=t[i],c=u.length,s=r[i]=new Array(c),l=0;l<c;++l)(o=u[l])&&(a=e.call(o,o.__data__,l,u))&&("__data__"in o&&(a.__data__=o.__data__),s[l]=a);return new Y(r,this._parents)},selectAll:function(e){"function"!=typeof e&&(e=l(e));for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var a,u=t[o],c=u.length,s=0;s<c;++s)(a=u[s])&&(r.push(e.call(a,a.__data__,s,u)),i.push(a));return new Y(r,i)},filter:function(e){"function"!=typeof e&&(e=d(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a=t[i],u=a.length,c=r[i]=[],s=0;s<u;++s)(o=a[s])&&e.call(o,o.__data__,s,a)&&c.push(o);return new Y(r,this._parents)},data:function(e,t){if(!e)return g=new Array(this.size()),l=-1,this.each(function(e){g[++l]=e}),g;var n,r=t?b:_,i=this._parents,o=this._groups;"function"!=typeof e&&(n=e,e=function(){return n});for(var a=o.length,u=new Array(a),c=new Array(a),s=new Array(a),l=0;l<a;++l){var f=i[l],d=o[l],p=d.length,g=e.call(f,f&&f.__data__,l,i),h=g.length,m=c[l]=new Array(h),v=u[l]=new Array(h);r(f,d,m,v,s[l]=new Array(p),g,t);for(var y,T,O=0,S=0;O<h;++O)if(y=m[O]){for(S<=O&&(S=O+1);!(T=v[S])&&++S<h;);y._next=T||null}}return(u=new Y(u,i))._enter=c,u._exit=s,u},enter:function(){return new Y(this._enter||this._groups.map(p),this._parents)},exit:function(){return new Y(this._exit||this._groups.map(p),this._parents)},merge:function(e){for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),u=0;u<o;++u)for(var c,s=t[u],l=n[u],f=s.length,d=a[u]=new Array(f),p=0;p<f;++p)(c=s[p]||l[p])&&(d[p]=c);for(;u<r;++u)a[u]=t[u];return new Y(a,this._parents)},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],o=i.length-1,a=i[o];0<=--o;)(r=i[o])&&(a&&a!==r.nextSibling&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(n){function e(e,t){return e&&t?n(e.__data__,t.__data__):!e-!t}n||(n=m);for(var t=this._groups,r=t.length,i=new Array(r),o=0;o<r;++o){for(var a,u=t[o],c=u.length,s=i[o]=new Array(c),l=0;l<c;++l)(a=u[l])&&(s[l]=a);s.sort(e)}return new Y(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){var e=new Array(this.size()),t=-1;return this.each(function(){e[++t]=this}),e},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){var e=0;return this.each(function(){++e}),e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,o=t[n],a=0,u=o.length;a<u;++a)(i=o[a])&&e.call(i,i.__data__,a,o);return this},attr:function(e,t){var n=a(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}}:"function"==typeof t?n.local?function(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}:function(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}}:n.local?function(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}:function(e,t){return function(){this.setAttribute(e,t)}})(n,t))},style:function(e,t,n){return 1<arguments.length?this.each((null==t?function(e){return function(){this.style.removeProperty(e)}}:"function"==typeof t?function(t,n,r){return function(){var e=n.apply(this,arguments);null==e?this.style.removeProperty(t):this.style.setProperty(t,e,r)}}:function(e,t,n){return function(){this.style.setProperty(e,t,n)}})(e,t,null==n?"":n)):y(this.node(),e)},property:function(e,t){return 1<arguments.length?this.each((null==t?function(e){return function(){delete this[e]}}:"function"==typeof t?function(t,n){return function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}}:function(e,t){return function(){this[e]=t}})(e,t)):this.node()[e]},classed:function(e,t){var n=T(e+"");if(arguments.length<2){for(var r=O(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?function(e,t){return function(){(t.apply(this,arguments)?E:w)(this,e)}}:t?function(e){return function(){E(this,e)}}:function(e){return function(){w(this,e)}})(n,t))},text:function(e){return arguments.length?this.each(null==e?A:("function"==typeof e?function(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}:function(e){return function(){this.textContent=e}})(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?C:("function"==typeof e?function(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}:function(e){return function(){this.innerHTML=e}})(e)):this.node().innerHTML},raise:function(){return this.each(N)},lower:function(){return this.each(D)},append:function(e){var t="function"==typeof e?e:u(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var n="function"==typeof e?e:u(e),r=null==t?M:"function"==typeof t?t:f(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(x)},clone:function(e){return this.select(e?I:U)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,o=(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return 0<=n&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}),a=o.length;if(!(arguments.length<2)){for(u=t?k:R,null==n&&(n=!1),r=0;r<a;++r)this.each(u(o[r],t,n));return this}var u=this.node().__on;if(u)for(var c,s=0,l=u.length;s<l;++s)for(r=0,c=u[s];r<a;++r)if((i=o[r]).type===c.type&&i.name===c.name)return c.value},dispatch:function(e,t){return this.each(("function"==typeof t?function(e,t){return function(){return j(this,e,t.apply(this,arguments))}}:function(e,t){return function(){return j(this,e,t)}})(e,t))}};var B=0;function W(){return new X}function X(){this._="@"+(++B).toString(36)}function G(){for(var e,t=o.event;e=t.sourceEvent;)t=e;return t}function K(e,t){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}X.prototype=W.prototype={constructor:X,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}},o.create=function(e){return z(u(e).call(document.documentElement))},o.creator=u,o.local=W,o.matcher=d,o.mouse=function(e){var t=G();return t.changedTouches&&(t=t.changedTouches[0]),K(e,t)},o.namespace=a,o.namespaces=i,o.clientPoint=K,o.select=z,o.selectAll=function(e){return"string"==typeof e?new Y([document.querySelectorAll(e)],[document.documentElement]):new Y([null==e?[]:e],H)},o.selection=q,o.selector=f,o.selectorAll=l,o.style=y,o.touch=function(e,t,n){arguments.length<3&&(n=t,t=G().changedTouches);for(var r,i=0,o=t?t.length:0;i<o;++i)if((r=t[i]).identifier===n)return K(e,r);return null},o.touches=function(e,t){null==t&&(t=G().touches);for(var n=0,r=t?t.length:0,i=new Array(r);n<r;++n)i[n]=K(e,t[n]);return i},o.window=v,o.customEvent=function(e,t,n,r){var i=o.event;e.sourceEvent=o.event,o.event=e;try{return t.apply(n,r)}finally{o.event=i}},Object.defineProperty(o,"__esModule",{value:!0})}("object"==typeof n&&void 0!==t?n:r.d3=r.d3||{})},{}],3:[function(e,t,n){var r,i;r=this,i=function(t,w){"use strict";function A(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function C(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function N(e){return{y:e,m:0,d:1,H:0,M:0,S:0,L:0}}function n(e){var r=e.dateTime,i=e.date,o=e.time,t=e.periods,n=e.days,a=e.shortDays,u=e.months,c=e.shortMonths,s=M(t),l=x(t),f=M(n),d=x(n),p=M(a),g=x(a),h=M(u),m=x(u),v=M(c),y=x(c),T={a:function(e){return a[e.getDay()]},A:function(e){return n[e.getDay()]},b:function(e){return c[e.getMonth()]},B:function(e){return u[e.getMonth()]},c:null,d:J,e:J,f:ne,H:Z,I:$,j:ee,L:te,m:re,M:ie,p:function(e){return t[+(12<=e.getHours())]},Q:Ue,s:Ie,S:oe,u:ae,U:ue,V:ce,w:se,W:le,x:null,X:null,y:fe,Y:de,Z:pe,"%":xe},O={a:function(e){return a[e.getUTCDay()]},A:function(e){return n[e.getUTCDay()]},b:function(e){return c[e.getUTCMonth()]},B:function(e){return u[e.getUTCMonth()]},c:null,d:ge,e:ge,f:Te,H:he,I:me,j:ve,L:ye,m:Oe,M:Se,p:function(e){return t[+(12<=e.getUTCHours())]},Q:Ue,s:Ie,S:_e,u:be,U:Ee,V:we,w:Ae,W:Ce,x:null,X:null,y:Ne,Y:De,Z:Me,"%":xe},S={a:function(e,t,n){var r=p.exec(t.slice(n));return r?(e.w=g[r[0].toLowerCase()],n+r[0].length):-1},A:function(e,t,n){var r=f.exec(t.slice(n));return r?(e.w=d[r[0].toLowerCase()],n+r[0].length):-1},b:function(e,t,n){var r=v.exec(t.slice(n));return r?(e.m=y[r[0].toLowerCase()],n+r[0].length):-1},B:function(e,t,n){var r=h.exec(t.slice(n));return r?(e.m=m[r[0].toLowerCase()],n+r[0].length):-1},c:function(e,t,n){return E(e,r,t,n)},d:Y,e:Y,f:G,H:z,I:z,j:q,L:X,m:H,M:B,p:function(e,t,n){var r=s.exec(t.slice(n));return r?(e.p=l[r[0].toLowerCase()],n+r[0].length):-1},Q:V,s:Q,S:W,u:I,U:L,V:P,w:U,W:F,x:function(e,t,n){return E(e,i,t,n)},X:function(e,t,n){return E(e,o,t,n)},y:k,Y:R,Z:j,"%":K};function _(c,s){return function(e){var t,n,r,i=[],o=-1,a=0,u=c.length;for(e instanceof Date||(e=new Date(+e));++o<u;)37===c.charCodeAt(o)&&(i.push(c.slice(a,o)),null!=(n=D[t=c.charAt(++o)])?t=c.charAt(++o):n="e"===t?" ":"0",(r=s[t])&&(t=r(e,n)),i.push(t),a=o+1);return i.push(c.slice(a,o)),i.join("")}}function b(i,o){return function(e){var t,n,r=N(1900);if(E(r,i,e+="",0)!=e.length)return null;if("Q"in r)return new Date(r.Q);if("p"in r&&(r.H=r.H%12+12*r.p),"V"in r){if(r.V<1||53<r.V)return null;"w"in r||(r.w=1),"Z"in r?(t=4<(n=(t=C(N(r.y))).getUTCDay())||0===n?w.utcMonday.ceil(t):w.utcMonday(t),t=w.utcDay.offset(t,7*(r.V-1)),r.y=t.getUTCFullYear(),r.m=t.getUTCMonth(),r.d=t.getUTCDate()+(r.w+6)%7):(t=4<(n=(t=o(N(r.y))).getDay())||0===n?w.timeMonday.ceil(t):w.timeMonday(t),t=w.timeDay.offset(t,7*(r.V-1)),r.y=t.getFullYear(),r.m=t.getMonth(),r.d=t.getDate()+(r.w+6)%7)}else("W"in r||"U"in r)&&("w"in r||(r.w="u"in r?r.u%7:"W"in r?1:0),n="Z"in r?C(N(r.y)).getUTCDay():o(N(r.y)).getDay(),r.m=0,r.d="W"in r?(r.w+6)%7+7*r.W-(n+5)%7:r.w+7*r.U-(n+6)%7);return"Z"in r?(r.H+=r.Z/100|0,r.M+=r.Z%100,C(r)):o(r)}}function E(e,t,n,r){for(var i,o,a=0,u=t.length,c=n.length;a<u;){if(c<=r)return-1;if(37===(i=t.charCodeAt(a++))){if(i=t.charAt(a++),!(o=S[i in D?t.charAt(a++):i])||(r=o(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return T.x=_(i,T),T.X=_(o,T),T.c=_(r,T),O.x=_(i,O),O.X=_(o,O),O.c=_(r,O),{format:function(e){var t=_(e+="",T);return t.toString=function(){return e},t},parse:function(e){var t=b(e+="",A);return t.toString=function(){return e},t},utcFormat:function(e){var t=_(e+="",O);return t.toString=function(){return e},t},utcParse:function(e){var t=b(e,C);return t.toString=function(){return e},t}}}var r,D={"-":"",_:" ",0:"0"},i=/^\s*\d+/,o=/^%/,a=/[\\^$*+?|[\]().{}]/g;function u(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function c(e){return e.replace(a,"\\$&")}function M(e){return new RegExp("^(?:"+e.map(c).join("|")+")","i")}function x(e){for(var t={},n=-1,r=e.length;++n<r;)t[e[n].toLowerCase()]=n;return t}function U(e,t,n){var r=i.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function I(e,t,n){var r=i.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function L(e,t,n){var r=i.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function P(e,t,n){var r=i.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function F(e,t,n){var r=i.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function R(e,t,n){var r=i.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function k(e,t,n){var r=i.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(68<+r[0]?1900:2e3),n+r[0].length):-1}function j(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function H(e,t,n){var r=i.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Y(e,t,n){var r=i.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function q(e,t,n){var r=i.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function z(e,t,n){var r=i.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function B(e,t,n){var r=i.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function W(e,t,n){var r=i.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function X(e,t,n){var r=i.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function G(e,t,n){var r=i.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function K(e,t,n){var r=o.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function V(e,t,n){var r=i.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Q(e,t,n){var r=i.exec(t.slice(n));return r?(e.Q=1e3*+r[0],n+r[0].length):-1}function J(e,t){return u(e.getDate(),t,2)}function Z(e,t){return u(e.getHours(),t,2)}function $(e,t){return u(e.getHours()%12||12,t,2)}function ee(e,t){return u(1+w.timeDay.count(w.timeYear(e),e),t,3)}function te(e,t){return u(e.getMilliseconds(),t,3)}function ne(e,t){return te(e,t)+"000"}function re(e,t){return u(e.getMonth()+1,t,2)}function ie(e,t){return u(e.getMinutes(),t,2)}function oe(e,t){return u(e.getSeconds(),t,2)}function ae(e){var t=e.getDay();return 0===t?7:t}function ue(e,t){return u(w.timeSunday.count(w.timeYear(e),e),t,2)}function ce(e,t){var n=e.getDay();return e=4<=n||0===n?w.timeThursday(e):w.timeThursday.ceil(e),u(w.timeThursday.count(w.timeYear(e),e)+(4===w.timeYear(e).getDay()),t,2)}function se(e){return e.getDay()}function le(e,t){return u(w.timeMonday.count(w.timeYear(e),e),t,2)}function fe(e,t){return u(e.getFullYear()%100,t,2)}function de(e,t){return u(e.getFullYear()%1e4,t,4)}function pe(e){var t=e.getTimezoneOffset();return(0<t?"-":(t*=-1,"+"))+u(t/60|0,"0",2)+u(t%60,"0",2)}function ge(e,t){return u(e.getUTCDate(),t,2)}function he(e,t){return u(e.getUTCHours(),t,2)}function me(e,t){return u(e.getUTCHours()%12||12,t,2)}function ve(e,t){return u(1+w.utcDay.count(w.utcYear(e),e),t,3)}function ye(e,t){return u(e.getUTCMilliseconds(),t,3)}function Te(e,t){return ye(e,t)+"000"}function Oe(e,t){return u(e.getUTCMonth()+1,t,2)}function Se(e,t){return u(e.getUTCMinutes(),t,2)}function _e(e,t){return u(e.getUTCSeconds(),t,2)}function be(e){var t=e.getUTCDay();return 0===t?7:t}function Ee(e,t){return u(w.utcSunday.count(w.utcYear(e),e),t,2)}function we(e,t){var n=e.getUTCDay();return e=4<=n||0===n?w.utcThursday(e):w.utcThursday.ceil(e),u(w.utcThursday.count(w.utcYear(e),e)+(4===w.utcYear(e).getUTCDay()),t,2)}function Ae(e){return e.getUTCDay()}function Ce(e,t){return u(w.utcMonday.count(w.utcYear(e),e),t,2)}function Ne(e,t){return u(e.getUTCFullYear()%100,t,2)}function De(e,t){return u(e.getUTCFullYear()%1e4,t,4)}function Me(){return"+0000"}function xe(){return"%"}function Ue(e){return+e}function Ie(e){return Math.floor(+e/1e3)}function e(e){return r=n(e),t.timeFormat=r.format,t.timeParse=r.parse,t.utcFormat=r.utcFormat,t.utcParse=r.utcParse,r}e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var s="%Y-%m-%dT%H:%M:%S.%LZ";var l=Date.prototype.toISOString?function(e){return e.toISOString()}:t.utcFormat(s);var f=+new Date("2000-01-01T00:00:00.000Z")?function(e){var t=new Date(e);return isNaN(t)?null:t}:t.utcParse(s);t.timeFormatDefaultLocale=e,t.timeFormatLocale=n,t.isoFormat=l,t.isoParse=f,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n,e("d3-time")):i(r.d3=r.d3||{},r.d3)},{"d3-time":4}],4:[function(e,t,n){var r;r=this,function(e){"use strict";var i=new Date,c=new Date;function s(o,a,n,r){function u(e){return o(e=new Date(+e)),e}return(u.floor=u).ceil=function(e){return o(e=new Date(e-1)),a(e,1),o(e),e},u.round=function(e){var t=u(e),n=u.ceil(e);return e-t<n-e?t:n},u.offset=function(e,t){return a(e=new Date(+e),null==t?1:Math.floor(t)),e},u.range=function(e,t,n){var r,i=[];if(e=u.ceil(e),n=null==n?1:Math.floor(n),!(e<t&&0<n))return i;for(;i.push(r=new Date(+e)),a(e,n),o(e),r<e&&e<t;);return i},u.filter=function(n){return s(function(e){if(e<=e)for(;o(e),!n(e);)e.setTime(e-1)},function(e,t){if(e<=e)if(t<0)for(;++t<=0;)for(;a(e,-1),!n(e););else for(;0<=--t;)for(;a(e,1),!n(e););})},n&&(u.count=function(e,t){return i.setTime(+e),c.setTime(+t),o(i),o(c),Math.floor(n(i,c))},u.every=function(t){return t=Math.floor(t),isFinite(t)&&0<t?1<t?u.filter(r?function(e){return r(e)%t==0}:function(e){return u.count(0,e)%t==0}):u:null}),u}var t=s(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});t.every=function(n){return n=Math.floor(n),isFinite(n)&&0<n?1<n?s(function(e){e.setTime(Math.floor(e/n)*n)},function(e,t){e.setTime(+e+t*n)},function(e,t){return(t-e)/n}):t:null};var n=t.range,r=6e4,o=36e5,a=6048e5,u=s(function(e){e.setTime(1e3*Math.floor(e/1e3))},function(e,t){e.setTime(+e+1e3*t)},function(e,t){return(t-e)/1e3},function(e){return e.getUTCSeconds()}),l=u.range,f=s(function(e){e.setTime(Math.floor(e/r)*r)},function(e,t){e.setTime(+e+t*r)},function(e,t){return(t-e)/r},function(e){return e.getMinutes()}),d=f.range,p=s(function(e){var t=e.getTimezoneOffset()*r%o;t<0&&(t+=o),e.setTime(Math.floor((+e-t)/o)*o+t)},function(e,t){e.setTime(+e+t*o)},function(e,t){return(t-e)/o},function(e){return e.getHours()}),g=p.range,h=s(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*r)/864e5},function(e){return e.getDate()-1}),m=h.range;function v(t){return s(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*r)/a})}var y=v(0),T=v(1),O=v(2),S=v(3),_=v(4),b=v(5),E=v(6),w=y.range,A=T.range,C=O.range,N=S.range,D=_.range,M=b.range,x=E.range,U=s(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())},function(e){return e.getMonth()}),I=U.range,L=s(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});L.every=function(n){return isFinite(n=Math.floor(n))&&0<n?s(function(e){e.setFullYear(Math.floor(e.getFullYear()/n)*n),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t*n)}):null};var P=L.range,F=s(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+t*r)},function(e,t){return(t-e)/r},function(e){return e.getUTCMinutes()}),R=F.range,k=s(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+t*o)},function(e,t){return(t-e)/o},function(e){return e.getUTCHours()}),j=k.range,H=s(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/864e5},function(e){return e.getUTCDate()-1}),Y=H.range;function q(t){return s(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/a})}var z=q(0),B=q(1),W=q(2),X=q(3),G=q(4),K=q(5),V=q(6),Q=z.range,J=B.range,Z=W.range,$=X.range,ee=G.range,te=K.range,ne=V.range,re=s(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())},function(e){return e.getUTCMonth()}),ie=re.range,oe=s(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});oe.every=function(n){return isFinite(n=Math.floor(n))&&0<n?s(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/n)*n),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t*n)}):null};var ae=oe.range;e.timeInterval=s,e.timeMillisecond=t,e.timeMilliseconds=n,e.utcMillisecond=t,e.utcMilliseconds=n,e.timeSecond=u,e.timeSeconds=l,e.utcSecond=u,e.utcSeconds=l,e.timeMinute=f,e.timeMinutes=d,e.timeHour=p,e.timeHours=g,e.timeDay=h,e.timeDays=m,e.timeWeek=y,e.timeWeeks=w,e.timeSunday=y,e.timeSundays=w,e.timeMonday=T,e.timeMondays=A,e.timeTuesday=O,e.timeTuesdays=C,e.timeWednesday=S,e.timeWednesdays=N,e.timeThursday=_,e.timeThursdays=D,e.timeFriday=b,e.timeFridays=M,e.timeSaturday=E,e.timeSaturdays=x,e.timeMonth=U,e.timeMonths=I,e.timeYear=L,e.timeYears=P,e.utcMinute=F,e.utcMinutes=R,e.utcHour=k,e.utcHours=j,e.utcDay=H,e.utcDays=Y,e.utcWeek=z,e.utcWeeks=Q,e.utcSunday=z,e.utcSundays=Q,e.utcMonday=B,e.utcMondays=J,e.utcTuesday=W,e.utcTuesdays=Z,e.utcWednesday=X,e.utcWednesdays=$,e.utcThursday=G,e.utcThursdays=ee,e.utcFriday=K,e.utcFridays=te,e.utcSaturday=V,e.utcSaturdays=ne,e.utcMonth=re,e.utcMonths=ie,e.utcYear=oe,e.utcYears=ae,Object.defineProperty(e,"__esModule",{value:!0})}("object"==typeof n&&void 0!==t?n:r.d3=r.d3||{})},{}],5:[function(e,t,n){var y="undefined"!=typeof JSON?JSON:e("jsonify");t.exports=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var p=t.space||"";"number"==typeof p&&(p=Array(p+1).join(" "));var o,g="boolean"==typeof t.cycles&&t.cycles,h=t.replacer||function(e,t){return t},m=t.cmp&&(o=t.cmp,function(i){return function(e,t){var n={key:e,value:i[e]},r={key:t,value:i[t]};return o(n,r)}}),v=[];return function e(t,n,r,i){var o=p?"\n"+new Array(i+1).join(p):"",a=p?": ":":";if(r&&r.toJSON&&"function"==typeof r.toJSON&&(r=r.toJSON()),void 0!==(r=h.call(t,n,r))){if("object"!=typeof r||null===r)return y.stringify(r);if(T(r)){for(var u=[],c=0;c<r.length;c++){var s=e(r,c,r[c],i+1)||y.stringify(null);u.push(o+p+s)}return"["+u.join(",")+o+"]"}if(-1!==v.indexOf(r)){if(g)return y.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}v.push(r);var l=O(r).sort(m&&m(r));for(u=[],c=0;c<l.length;c++){var f=e(r,n=l[c],r[n],i+1);if(f){var d=y.stringify(n)+a+f;u.push(o+p+d)}}return v.splice(v.indexOf(r),1),"{"+u.join(",")+o+"}"}}({"":e},"",e,0)};var T=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},O=Object.keys||function(e){var t=Object.prototype.hasOwnProperty||function(){return!0},n=[];for(var r in e)t.call(e,r)&&n.push(r);return n}},{jsonify:6}],6:[function(e,t,n){n.parse=e("./lib/parse"),n.stringify=e("./lib/stringify")},{"./lib/parse":7,"./lib/stringify":8}],7:[function(e,t,n){var r,i,o,u,a={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},c=function(e){throw{name:"SyntaxError",message:e,at:r,text:o}},s=function(e){return e&&e!==i&&c("Expected '"+e+"' instead of '"+i+"'"),i=o.charAt(r),r+=1,i},l=function(){var e,t="";for("-"===i&&s(t="-");"0"<=i&&i<="9";)t+=i,s();if("."===i)for(t+=".";s()&&"0"<=i&&i<="9";)t+=i;if("e"===i||"E"===i)for(t+=i,s(),"-"!==i&&"+"!==i||(t+=i,s());"0"<=i&&i<="9";)t+=i,s();if(e=+t,isFinite(e))return e;c("Bad number")},f=function(){var e,t,n,r="";if('"'===i)for(;s();){if('"'===i)return s(),r;if("\\"===i)if(s(),"u"===i){for(t=n=0;t<4&&(e=parseInt(s(),16),isFinite(e));t+=1)n=16*n+e;r+=String.fromCharCode(n)}else{if("string"!=typeof a[i])break;r+=a[i]}else r+=i}c("Bad string")},d=function(){for(;i&&i<=" ";)s()};u=function(){switch(d(),i){case"{":return function(){var e,t={};if("{"===i){if(s("{"),d(),"}"===i)return s("}"),t;for(;i;){if(e=f(),d(),s(":"),Object.hasOwnProperty.call(t,e)&&c('Duplicate key "'+e+'"'),t[e]=u(),d(),"}"===i)return s("}"),t;s(","),d()}}c("Bad object")}();case"[":return function(){var e=[];if("["===i){if(s("["),d(),"]"===i)return s("]"),e;for(;i;){if(e.push(u()),d(),"]"===i)return s("]"),e;s(","),d()}}c("Bad array")}();case'"':return f();case"-":return l();default:return"0"<=i&&i<="9"?l():function(){switch(i){case"t":return s("t"),s("r"),s("u"),s("e"),!0;case"f":return s("f"),s("a"),s("l"),s("s"),s("e"),!1;case"n":return s("n"),s("u"),s("l"),s("l"),null}c("Unexpected '"+i+"'")}()}},t.exports=function(e,a){var t;return o=e,r=0,i=" ",t=u(),d(),i&&c("Syntax error"),"function"==typeof a?function e(t,n){var r,i,o=t[n];if(o&&"object"==typeof o)for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(void 0!==(i=e(o,r))?o[r]=i:delete o[r]);return a.call(t,n,o)}({"":t},""):t}},{}],8:[function(e,t,n){var l,f,d,r=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,i={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function p(e){return r.lastIndex=0,r.test(e)?'"'+e.replace(r,function(e){var t=i[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}t.exports=function(e,t,n){var r;if(f=l="","number"==typeof n)for(r=0;r<n;r+=1)f+=" ";else"string"==typeof n&&(f=n);if((d=t)&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return function e(t,n){var r,i,o,a,u,c=l,s=n[t];switch(s&&"object"==typeof s&&"function"==typeof s.toJSON&&(s=s.toJSON(t)),"function"==typeof d&&(s=d.call(n,t,s)),typeof s){case"string":return p(s);case"number":return isFinite(s)?String(s):"null";case"boolean":case"null":return String(s);case"object":if(!s)return"null";if(l+=f,u=[],"[object Array]"===Object.prototype.toString.apply(s)){for(a=s.length,r=0;r<a;r+=1)u[r]=e(r,s)||"null";return o=0===u.length?"[]":l?"[\n"+l+u.join(",\n"+l)+"\n"+c+"]":"["+u.join(",")+"]",l=c,o}if(d&&"object"==typeof d)for(a=d.length,r=0;r<a;r+=1)"string"==typeof(i=d[r])&&(o=e(i,s))&&u.push(p(i)+(l?": ":":")+o);else for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(o=e(i,s))&&u.push(p(i)+(l?": ":":")+o);return o=0===u.length?"{}":l?"{\n"+l+u.join(",\n"+l)+"\n"+c+"}":"{"+u.join(",")+"}",l=c,o}}("",{"":e})}},{}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("vega-util"),i=e("./util"),o={argmax:1,argmin:1,average:1,count:1,distinct:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1};n.AGGREGATE_OPS=i.flagKeys(o),n.isAggregateOp=function(e){return!!o[e]},n.COUNTING_OPS=["count","valid","missing","distinct"],n.isCountingAggregateOp=function(e){return e&&i.contains(n.COUNTING_OPS,e)},n.SUM_OPS=["count","sum","distinct","valid","missing"],n.SHARED_DOMAIN_OPS=["mean","average","median","q1","q3","min","max"],n.SHARED_DOMAIN_OP_INDEX=r.toSet(n.SHARED_DOMAIN_OPS)},{"./util":27,"vega-util":28}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("vega-util"),i=e("./channel"),o=e("./util");n.binToString=function(t){return r.isBoolean(t)?"bin":"bin"+o.keys(t).map(function(e){return o.varName("_"+e+"_"+t[e])}).join("")},n.autoMaxBins=function(e){switch(e){case i.ROW:case i.COLUMN:case i.SIZE:case i.COLOR:case i.FILL:case i.STROKE:case i.OPACITY:case i.SHAPE:return 6;default:return 10}}},{"./channel":11,"./util":27,"vega-util":28}],11:[function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n};Object.defineProperty(n,"__esModule",{value:!0});var o,a,u=e("./util");(a=o=n.Channel||(n.Channel={})).ROW="row",a.COLUMN="column",a.X="x",a.Y="y",a.X2="x2",a.Y2="y2",a.LATITUDE="latitude",a.LONGITUDE="longitude",a.LATITUDE2="latitude2",a.LONGITUDE2="longitude2",a.COLOR="color",a.FILL="fill",a.STROKE="stroke",a.SHAPE="shape",a.SIZE="size",a.OPACITY="opacity",a.TEXT="text",a.ORDER="order",a.DETAIL="detail",a.KEY="key",a.TOOLTIP="tooltip",a.HREF="href",n.X=o.X,n.Y=o.Y,n.X2=o.X2,n.Y2=o.Y2,n.LATITUDE=o.LATITUDE,n.LATITUDE2=o.LATITUDE2,n.LONGITUDE=o.LONGITUDE,n.LONGITUDE2=o.LONGITUDE2,n.ROW=o.ROW,n.COLUMN=o.COLUMN,n.SHAPE=o.SHAPE,n.SIZE=o.SIZE,n.COLOR=o.COLOR,n.FILL=o.FILL,n.STROKE=o.STROKE,n.TEXT=o.TEXT,n.DETAIL=o.DETAIL,n.KEY=o.KEY,n.ORDER=o.ORDER,n.OPACITY=o.OPACITY,n.TOOLTIP=o.TOOLTIP,n.HREF=o.HREF,n.GEOPOSITION_CHANNEL_INDEX={longitude:1,longitude2:1,latitude:1,latitude2:1},n.GEOPOSITION_CHANNELS=u.flagKeys(n.GEOPOSITION_CHANNEL_INDEX);var c=r({x:1,y:1,x2:1,y2:1},n.GEOPOSITION_CHANNEL_INDEX,{color:1,fill:1,stroke:1,opacity:1,size:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1});n.isColorChannel=function(e){return"color"===e||"fill"===e||"stroke"===e};var s=r({},c,{row:1,column:1});n.CHANNELS=u.flagKeys(s);s.order,s.detail;var l=i(s,["order","detail"]);n.SINGLE_DEF_CHANNELS=u.flagKeys(l),n.isChannel=function(e){return!!s[e]},n.UNIT_CHANNELS=u.flagKeys(c);c.x,c.y,c.x2,c.y2,c.latitude,c.longitude,c.latitude2,c.longitude2;var f=i(c,["x","y","x2","y2","latitude","longitude","latitude2","longitude2"]);n.NONPOSITION_CHANNELS=u.flagKeys(f);var d={x:1,y:1};n.POSITION_SCALE_CHANNELS=u.flagKeys(d);f.text,f.tooltip,f.href,f.detail,f.key,f.order;var p=i(f,["text","tooltip","href","detail","key","order"]);n.NONPOSITION_SCALE_CHANNELS=u.flagKeys(p);var g=r({},d,p);function h(e){switch(e){case n.COLOR:case n.FILL:case n.STROKE:case n.DETAIL:case n.KEY:case n.TOOLTIP:case n.HREF:case n.ORDER:case n.OPACITY:case n.ROW:case n.COLUMN:return{point:!0,tick:!0,rule:!0,circle:!0,square:!0,bar:!0,rect:!0,line:!0,area:!0,text:!0,geoshape:!0};case n.X:case n.Y:case n.LATITUDE:case n.LONGITUDE:return{point:!0,tick:!0,rule:!0,circle:!0,square:!0,bar:!0,rect:!0,line:!0,area:!0,text:!0};case n.X2:case n.Y2:case n.LATITUDE2:case n.LONGITUDE2:return{rule:!0,bar:!0,rect:!0,area:!0};case n.SIZE:return{point:!0,tick:!0,rule:!0,circle:!0,square:!0,bar:!0,text:!0,line:!0};case n.SHAPE:return{point:!0,geoshape:!0};case n.TEXT:return{text:!0}}}n.SCALE_CHANNELS=u.flagKeys(g),n.isScaleChannel=function(e){return!!g[e]},n.supportMark=function(e,t){return t in h(e)},n.getSupportedMark=h,n.rangeType=function(e){switch(e){case n.X:case n.Y:case n.SIZE:case n.OPACITY:case n.X2:case n.Y2:return"continuous";case n.ROW:case n.COLUMN:case n.SHAPE:case n.TEXT:case n.TOOLTIP:case n.HREF:return"discrete";case n.COLOR:case n.FILL:case n.STROKE:return"flexible";case n.LATITUDE:case n.LONGITUDE:case n.LATITUDE2:case n.LONGITUDE2:case n.DETAIL:case n.KEY:case n.ORDER:return}throw new Error("rangeType not implemented for "+e)}},{"./util":27}],12:[function(e,t,T){"use strict";var O=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},S=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n};Object.defineProperty(T,"__esModule",{value:!0});var _=e("vega-util"),n=e("../encoding"),b=e("./../encoding"),E=e("./../fielddef"),w=e("./../log"),A=e("./common");function C(e){return!!e.type}T.BOXPLOT="box-plot",T.isBoxPlotDef=C,T.BOXPLOT_STYLES=["boxWhisker","box","boxMid"],T.VL_ONLY_BOXPLOT_CONFIG_PROPERTY_INDEX={box:["size","color","extent"],boxWhisker:["color"],boxMid:["color"]};var r=["x","y","color","detail","opacity","size"];function N(e){return O({},e,{encoding:n.reduce(e.encoding,function(e,t,n){return-1<r.indexOf(n)?e[n]=t:w.warn(w.message.incompatibleChannel(n,T.BOXPLOT)),e},{})})}T.filterUnsupportedChannels=N,T.normalizeBoxPlot=function(e,t){var n=(e=N(e)).mark,r=(e.encoding,e.selection),i=(e.projection,S(e,["mark","encoding","selection","projection"])),o=void 0;_.isNumber(t.box.extent)&&(o=t.box.extent),C(n)&&n.extent&&"min-max"===n.extent&&(o=void 0);var a,u,c,s,l=function(e,t,n){var r=function(e,t){e.mark;var n,r,i=e.encoding;if(e.projection,S(e,["mark","encoding","projection"]),"vertical"===t?(r="y",n=i.y):(r="x",n=i.x),n&&n.aggregate){var o=n.aggregate,a=S(n,["aggregate"]);o!==T.BOXPLOT&&w.warn("Continuous axis should not have customized aggregation function "+o),n=a}return{continuousAxisChannelDef:n,continuousAxis:r}}(e,t),i=r.continuousAxisChannelDef,a=r.continuousAxis,u=e.encoding,o=void 0===n,c=[{op:"q1",field:i.field,as:"lower_box_"+i.field},{op:"q3",field:i.field,as:"upper_box_"+i.field},{op:"median",field:i.field,as:"mid_box_"+i.field}],s=[];c.push({op:"min",field:i.field,as:(o?"lower_whisker_":"min_")+i.field}),c.push({op:"max",field:i.field,as:(o?"upper_whisker_":"max_")+i.field}),o||(s=[{calculate:"datum.upper_box_"+i.field+" - datum.lower_box_"+i.field,as:"iqr_"+i.field},{calculate:"min(datum.upper_box_"+i.field+" + datum.iqr_"+i.field+" * "+n+", datum.max_"+i.field+")",as:"upper_whisker_"+i.field},{calculate:"max(datum.lower_box_"+i.field+" - datum.iqr_"+i.field+" * "+n+", datum.min_"+i.field+")",as:"lower_whisker_"+i.field}]);var l=[],f=[],d=[],p={};return b.forEach(u,function(e,t){if(t!==a)if(E.isFieldDef(e)){if(e.aggregate&&e.aggregate!==T.BOXPLOT)c.push({op:e.aggregate,field:e.field,as:E.vgField(e)});else if(void 0===e.aggregate){var n=E.vgField(e),r=e.bin;if(r){var i=e.field;f.push({bin:r,field:i,as:n})}else if(e.timeUnit){var o=e.timeUnit;i=e.field,d.push({timeUnit:o,field:i,as:n})}l.push(n)}p[t]={field:E.vgField(e),type:e.type}}else p[t]=u[t]}),{transform:[].concat(f,d,[{aggregate:c,groupby:l}],s),continuousAxisChannelDef:i,continuousAxis:a,encodingWithoutContinuousAxis:p}}(e,function(e){var t=e.mark,n=e.encoding;if(e.projection,S(e,["mark","encoding","projection"]),E.isFieldDef(n.x)&&E.isContinuous(n.x)){if(E.isFieldDef(n.y)&&E.isContinuous(n.y)){if(void 0===n.x.aggregate&&n.y.aggregate===T.BOXPLOT)return"vertical";if(void 0===n.y.aggregate&&n.x.aggregate===T.BOXPLOT)return"horizontal";if(n.x.aggregate===T.BOXPLOT&&n.y.aggregate===T.BOXPLOT)throw new Error("Both x and y cannot have aggregate");return C(t)&&t.orient?t.orient:"vertical"}return"horizontal"}if(E.isFieldDef(n.y)&&E.isContinuous(n.y))return"vertical";throw new Error("Need a valid continuous axis for boxplots")}(e),o),f=l.transform,d=l.continuousAxisChannelDef,p=l.continuousAxis,g=l.encodingWithoutContinuousAxis,h=(g.color,g.size),m=S(g,["color","size"]),v=h?{size:h}:A.getMarkSpecificConfigMixins(t.box,"size"),y={};return d.scale&&(y.scale=d.scale),d.axis&&(y.axis=d.axis),O({},i,{transform:f,layer:[{mark:{type:"rule",style:"boxWhisker"},encoding:O((a={},a[p]=O({field:"lower_whisker_"+d.field,type:d.type},y),a[p+"2"]={field:"lower_box_"+d.field,type:d.type},a),m,A.getMarkSpecificConfigMixins(t.boxWhisker,"color"))},{mark:{type:"rule",style:"boxWhisker"},encoding:O((u={},u[p]={field:"upper_box_"+d.field,type:d.type},u[p+"2"]={field:"upper_whisker_"+d.field,type:d.type},u),m,A.getMarkSpecificConfigMixins(t.boxWhisker,"color"))},O({},r?{selection:r}:{},{mark:{type:"bar",style:"box"},encoding:O((c={},c[p]={field:"lower_box_"+d.field,type:d.type},c[p+"2"]={field:"upper_box_"+d.field,type:d.type},c),g,g.color?{}:A.getMarkSpecificConfigMixins(t.box,"color"),v)}),{mark:{type:"tick",style:"boxMid"},encoding:O((s={},s[p]={field:"mid_box_"+d.field,type:d.type},s),m,A.getMarkSpecificConfigMixins(t.boxMid,"color"),v)}]})}},{"../encoding":17,"./../encoding":17,"./../fielddef":18,"./../log":19,"./common":13,"vega-util":28}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getMarkSpecificConfigMixins=function(e,t){var n,r=e[t];return void 0!==r?((n={})[t]={value:r},n):{}}},{}],14:[function(e,t,n){"use strict";var a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},u=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n};Object.defineProperty(n,"__esModule",{value:!0}),n.ERRORBAR="error-bar",n.normalizeErrorBar=function(e){e.mark,e.selection,e.projection;var t=e.encoding,n=u(e,["mark","selection","projection","encoding"]),r=(t.size,u(t,["size"])),i=(t.x2,t.y2,u(t,["x2","y2"])),o=(i.x,i.y,u(i,["x","y"]));if(!t.x2&&!t.y2)throw new Error("Neither x2 or y2 provided");return a({},n,{layer:[{mark:"rule",encoding:r},{mark:"tick",encoding:i},{mark:"tick",encoding:t.x2?a({x:t.x2,y:t.y},o):a({x:t.x,y:t.y2},o)}]})}},{}],15:[function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(n,"__esModule",{value:!0});var i=e("./../mark"),o=e("./boxplot"),a=e("./errorbar"),u={};function c(e,t){u[e]=t}n.add=c,n.remove=function(e){delete u[e]},n.COMPOSITE_MARK_STYLES=o.BOXPLOT_STYLES,n.VL_ONLY_COMPOSITE_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX=r({},o.VL_ONLY_BOXPLOT_CONFIG_PROPERTY_INDEX),c(o.BOXPLOT,o.normalizeBoxPlot),c(a.ERRORBAR,a.normalizeErrorBar),n.normalize=function(e,t){var n=i.isMarkDef(e.mark)?e.mark.type:e.mark,r=u[n];if(r)return r(e,t);throw new Error('Invalid mark type "'+n+'"')}},{"./../mark":21,"./boxplot":12,"./errorbar":14}],16:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var l=e("vega-util"),f=e("./log"),d=e("./util"),p=2006;s.isDateTime=function(e){return!(!e||!(e.year||e.quarter||e.month||e.date||e.day||e.hours||e.minutes||e.seconds||e.milliseconds))},s.MONTHS=["january","february","march","april","may","june","july","august","september","october","november","december"],s.SHORT_MONTHS=s.MONTHS.map(function(e){return e.substr(0,3)}),s.DAYS=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],s.SHORT_DAYS=s.DAYS.map(function(e){return e.substr(0,3)}),s.dateTimeExpr=function(e,t){void 0===t&&(t=!1);var n=[];if(t&&void 0!==e.day&&1<d.keys(e).length&&(f.warn(f.message.droppedDay(e)),delete(e=d.duplicate(e)).day),void 0!==e.year?n.push(e.year):void 0!==e.day?n.push(p):n.push(0),void 0!==e.month){var r=t?function(e){if(l.isNumber(e))return e-1+"";var t=e.toLowerCase(),n=s.MONTHS.indexOf(t);if(-1!==n)return n+"";var r=t.substr(0,3),i=s.SHORT_MONTHS.indexOf(r);if(-1!==i)return i+"";throw new Error(f.message.invalidTimeUnit("month",e))}(e.month):e.month;n.push(r)}else if(void 0!==e.quarter){var i=t?function(e){if(l.isNumber(e))return 4<e&&f.warn(f.message.invalidTimeUnit("quarter",e)),e-1+"";throw new Error(f.message.invalidTimeUnit("quarter",e))}(e.quarter):e.quarter;n.push(i+"*3")}else n.push(0);if(void 0!==e.date)n.push(e.date);else if(void 0!==e.day){var o=t?function(e){if(l.isNumber(e))return e%7+"";var t=e.toLowerCase(),n=s.DAYS.indexOf(t);if(-1!==n)return n+"";var r=t.substr(0,3),i=s.SHORT_DAYS.indexOf(r);if(-1!==i)return i+"";throw new Error(f.message.invalidTimeUnit("day",e))}(e.day):e.day;n.push(o+"+1")}else n.push(1);for(var a=0,u=["hours","minutes","seconds","milliseconds"];a<u.length;a++){var c=u[a];void 0!==e[c]?n.push(e[c]):n.push(0)}return e.utc?"utc("+n.join(", ")+")":"datetime("+n.join(", ")+")"}},{"./log":19,"./util":27,"vega-util":28}],17:[function(e,t,n){"use strict";var l=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},f=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n};Object.defineProperty(n,"__esModule",{value:!0});var d=e("vega-util"),p=e("./channel"),g=e("./fielddef"),h=e("./log"),m=e("./type"),v=e("./util");function i(e,t){var n=e&&e[t];return!!n&&(d.isArray(n)?v.some(n,function(e){return!!e.field}):g.isFieldDef(n)||g.hasConditionalFieldDef(n))}n.channelHasField=i,n.isAggregate=function(r){return v.some(p.CHANNELS,function(e){if(i(r,e)){var t=r[e];if(d.isArray(t))return v.some(t,function(e){return!!e.aggregate});var n=g.getFieldDef(t);return n&&!!n.aggregate}return!1})},n.normalizeEncoding=function(c,s){return v.keys(c).reduce(function(e,n){if(!p.isChannel(n))return h.warn(h.message.invalidEncodingChannel(n)),e;if(!p.supportMark(n,s))return h.warn(h.message.incompatibleChannel(n,s)),e;var t;if("size"===n&&"line"===s&&(r=g.getFieldDef(c[n]))&&r.aggregate)return h.warn(h.message.incompatibleChannel(n,s,"when the field is aggregated.")),e;if("detail"===n||"order"===n)(i=c[n])&&(e[n]=(d.isArray(i)?i:[i]).reduce(function(e,t){return g.isFieldDef(t)?e.push(g.normalizeFieldDef(t,n)):h.warn(h.message.emptyFieldDef(t,n)),e},[]));else{var r,i=c[n];if((r=g.getFieldDef(c[n]))&&v.contains([m.Type.LATITUDE,m.Type.LONGITUDE],r.type)){var o=n,a=(e[o],f(e,["symbol"==typeof o?o:o+""])),u="x"===n?"longitude":"y"===n?"latitude":"x2"===n?"longitude2":"y2"===n?"latitude2":void 0;return h.warn(h.message.latLongDeprecated(n,r.type,u)),l({},a,((t={})[u]=l({},g.normalize(r,n),{type:"quantitative"}),t))}if(!g.isFieldDef(i)&&!g.isValueDef(i)&&!g.isConditionalDef(i))return h.warn(h.message.emptyFieldDef(i,n)),e;e[n]=g.normalize(i,n)}return e},{})},n.isRanged=function(e){return e&&(!!e.x&&!!e.x2||!!e.y&&!!e.y2)},n.fieldDefs=function(n){var r=[];return p.CHANNELS.forEach(function(e){if(i(n,e)){var t=n[e];(d.isArray(t)?t:[t]).forEach(function(e){g.isFieldDef(e)?r.push(e):g.hasConditionalFieldDef(e)&&r.push(e.condition)})}}),r},n.forEach=function(e,n,r){if(e)for(var t=function(t){d.isArray(e[t])?e[t].forEach(function(e){n.call(r,e,t)}):n.call(r,e[t],t)},i=0,o=v.keys(e);i<o.length;i++)t(o[i])},n.reduce=function(r,i,e,o){return r?v.keys(r).reduce(function(e,n){var t=r[n];return d.isArray(t)?t.reduce(function(e,t){return i.call(o,e,t,n)},e):i.call(o,e,t,n)},e):e}},{"./channel":11,"./fielddef":18,"./log":19,"./type":26,"./util":27,"vega-util":28}],18:[function(e,t,n){"use strict";var c=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n};Object.defineProperty(n,"__esModule",{value:!0});var r=e("vega-util"),l=e("./aggregate"),a=e("./bin"),i=e("./channel"),f=e("./log"),d=e("./timeunit"),p=e("./type"),u=e("./util");function o(e){return!!e&&!!e.condition&&!r.isArray(e.condition)&&g(e.condition)}function g(e){return!(!e||!e.field&&"count"!==e.aggregate)}function h(e){return e&&"value"in e&&void 0!==e.value}function m(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return!!e.bin;case"latitude":case"longitude":case"temporal":return!1}throw new Error(f.message.invalidFieldType(e.type))}function v(e){return!m(e)}function y(e){return"count"===e.aggregate}function T(e,t){var n=e.field,r=e.bin,i=e.timeUnit,o=e.aggregate;return"count"===o?t.countTitle:r?n+" (binned)":i?n+" ("+d.getTimeUnitParts(i).join("-")+")":o?u.titlecase(o)+" of "+n:n}function O(e,t){var n=e.aggregate||e.timeUnit||e.bin&&"bin";return n?n.toUpperCase()+"("+e.field+")":e.field}n.isConditionalSelection=function(e){return e.selection},n.isRepeatRef=function(e){return e&&!r.isString(e)&&"repeat"in e},n.toFieldDefBase=function(e){var t=e.field,n=e.timeUnit,r=e.bin,i=e.aggregate;return c({},n?{timeUnit:n}:{},r?{bin:r}:{},i?{aggregate:i}:{},{field:t})},n.isConditionalDef=function(e){return!!e&&!!e.condition},n.hasConditionalFieldDef=o,n.hasConditionalValueDef=function(e){return!!e&&!!e.condition&&(r.isArray(e.condition)||h(e.condition))},n.isFieldDef=g,n.isStringFieldDef=function(e){return g(e)&&r.isString(e.field)},n.isValueDef=h,n.isScaleFieldDef=function(e){return!(!e||!e.scale&&!e.sort)},n.vgField=function(e,t){void 0===t&&(t={});var n=e.field,r=t.prefix,i=t.suffix;if(y(e))n="count_*";else{var o=void 0;t.nofn||(e.bin?(o=a.binToString(e.bin),i=t.binSuffix||""):e.aggregate?o=String(t.aggregate||e.aggregate):e.timeUnit&&(o=String(e.timeUnit))),o&&(n=o+"_"+n)}return i&&(n=n+"_"+i),r&&(n=r+"_"+n),t.expr&&(n=""+t.expr+u.accessPath(n)),n},n.isDiscrete=m,n.isContinuous=v,n.isCount=y,n.verbalTitleFormatter=T,n.functionalTitleFormatter=O,n.defaultTitleFormatter=function(e,t){switch(t.fieldTitle){case"plain":return e.field;case"functional":return O(e);default:return T(e,t)}};var S=n.defaultTitleFormatter;function _(e){S=e}function b(e,t){if(e.timeUnit)return"temporal";if(e.bin)return"quantitative";switch(i.rangeType(t)){case"continuous":return"quantitative";case"discrete":case"flexible":return"nominal";default:return"quantitative"}}function E(e,t){if(e.aggregate&&!l.isAggregateOp(e.aggregate)){e.aggregate;var n=s(e,["aggregate"]);f.warn(f.message.invalidAggregate(e.aggregate)),e=n}if(e.timeUnit&&(e=c({},e,{timeUnit:d.normalizeTimeUnit(e.timeUnit)})),e.bin&&(e=c({},e,{bin:w(e.bin,t)})),e.type){var r=p.getFullName(e.type);e.type!==r&&(e=c({},e,{type:r})),"quantitative"!==e.type&&l.isCountingAggregateOp(e.aggregate)&&(f.warn(f.message.invalidFieldTypeForCountAggregate(e.type,e.aggregate)),e=c({},e,{type:"quantitative"}))}else{var i=b(e,t);f.warn(f.message.emptyOrInvalidFieldType(e.type,t,i)),e=c({},e,{type:i})}var o=C(e,t),a=o.compatible,u=o.warning;return a||f.warn(u),e}function w(e,t){return r.isBoolean(e)?{maxbins:a.autoMaxBins(t)}:e.maxbins||e.step?e:c({},e,{maxbins:a.autoMaxBins(t)})}n.setTitleFormatter=_,n.resetTitleFormatter=function(){_(n.defaultTitleFormatter)},n.title=function(e,t){return S(e,t)},n.defaultType=b,n.getFieldDef=function(e){return g(e)?e:o(e)?e.condition:void 0},n.normalize=function(e,t){if(r.isString(e)||r.isNumber(e)||r.isBoolean(e)){var n=r.isString(e)?"string":r.isNumber(e)?"number":"boolean";return f.warn(f.message.primitiveChannelDef(t,n,e)),{value:e}}return g(e)?E(e,t):o(e)?c({},e,{condition:E(e.condition,t)}):e},n.normalizeFieldDef=E,n.normalizeBin=w;var A={compatible:!0};function C(e,t){switch(t){case"row":case"column":return v(e)&&!e.timeUnit?{compatible:!1,warning:f.message.facetChannelShouldBeDiscrete(t)}:A;case"x":case"y":case"color":case"fill":case"stroke":case"text":case"detail":case"key":case"tooltip":case"href":return A;case"longitude":case"longitude2":case"latitude":case"latitude2":return e.type!==p.QUANTITATIVE?{compatible:!1,warning:"Channel "+t+" should not be used with "+e.type+" field."}:A;case"opacity":case"size":case"x2":case"y2":return m(e)&&!e.bin?{compatible:!1,warning:"Channel "+t+" should not be used with discrete field."}:A;case"shape":return"nominal"!==e.type&&"geojson"!==e.type?{compatible:!1,warning:"Shape channel should be used with nominal data or geojson only"}:A;case"order":return"nominal"===e.type?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:A}throw new Error("channelCompatability not implemented for channel "+t)}n.channelCompatibility=C,n.isNumberFieldDef=function(e){return"quantitative"===e.type||!!e.bin},n.isTimeFieldDef=function(e){return"temporal"===e.type||!!e.timeUnit}},{"./aggregate":9,"./bin":10,"./channel":11,"./log":19,"./timeunit":25,"./type":26,"./util":27,"vega-util":28}],19:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e("vega-util"),o=e("./util"),a=i.logger(i.Warn),u=a,c=function(){function e(){this.warns=[],this.infos=[],this.debugs=[]}return e.prototype.level=function(){return this},e.prototype.warn=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this.warns).push.apply(e,t),this},e.prototype.info=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this.infos).push.apply(e,t),this},e.prototype.debug=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this.debugs).push.apply(e,t),this},e}();function s(){return u=a}n.LocalLogger=c,n.wrap=function(e){return function(){u=new c,e(u),s()}},n.set=function(e){return u=e},n.reset=s,n.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];u.warn.apply(u,arguments)},n.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];u.info.apply(u,arguments)},n.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];u.debug.apply(u,arguments)},(r=n.message||(n.message={})).INVALID_SPEC="Invalid spec",r.FIT_NON_SINGLE='Autosize "fit" only works for single views and layered views.',r.CANNOT_FIX_RANGE_STEP_WITH_FIT='Cannot use a fixed value of "rangeStep" when "autosize" is "fit".',r.cannotProjectOnChannelWithoutField=function(e){return'Cannot project a selection on encoding channel "'+e+'", which has no field.'},r.nearestNotSupportForContinuous=function(e){return'The "nearest" transform is not supported for '+e+" marks."},r.selectionNotFound=function(e){return'Cannot find a selection named "'+e+'"'},r.SCALE_BINDINGS_CONTINUOUS="Scale bindings are currently only supported for scales with unbinned, continuous domains.",r.noSuchRepeatedValue=function(e){return'Unknown repeated value "'+e+'".'},r.CONCAT_CANNOT_SHARE_AXIS="Axes cannot be shared in concatenated views.",r.REPEAT_CANNOT_SHARE_AXIS="Axes cannot be shared in repeated views.",r.cannotSetTitleAnchor=function(e){return'Cannot set title "anchor" for a '+e+" spec"},r.unrecognizedParse=function(e){return'Unrecognized parse "'+e+'".'},r.differentParse=function(e,t,n){return'An ancestor parsed field "'+e+'" as '+n+" but a child wants to parse the field as "+t+"."},r.invalidTransformIgnored=function(e){return"Ignoring an invalid transform: "+o.stringify(e)+"."},r.NO_FIELDS_NEEDS_AS='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the the data from the secondary source.',r.encodingOverridden=function(e){return"Layer's shared "+e.join(",")+" channel "+(1===e.length?"is":"are")+" overriden"},r.projectionOverridden=function(e){var t=e.parentProjection,n=e.projection;return"Layer's shared projection "+o.stringify(t)+" is overridden by a child projection "+o.stringify(n)+"."},r.primitiveChannelDef=function(e,t,n){return"Channel "+e+" is a "+t+". Converted to {value: "+o.stringify(n)+"}."},r.invalidFieldType=function(e){return'Invalid field type "'+e+'"'},r.invalidFieldTypeForCountAggregate=function(e,t){return'Invalid field type "'+e+'" for aggregate: "'+t+'", using "quantitative" instead.'},r.invalidAggregate=function(e){return'Invalid aggregation operator "'+e+'"'},r.emptyOrInvalidFieldType=function(e,t,n){return'Invalid field type "'+e+'" for channel "'+t+'", using "'+n+'" instead.'},r.emptyFieldDef=function(e,t){return"Dropping "+o.stringify(e)+' from channel "'+t+'" since it does not contain data field or value.'},r.latLongDeprecated=function(e,t,n){return e+"-encoding with type "+t+" is deprecated. Replacing with "+n+"-encoding."},r.incompatibleChannel=function(e,t,n){return e+' dropped as it is incompatible with "'+t+'"'+(n?" when "+n:"")+"."},r.invalidEncodingChannel=function(e){return e+"-encoding is dropped as "+e+" is not a valid encoding channel."},r.facetChannelShouldBeDiscrete=function(e){return e+" encoding should be discrete (ordinal / nominal / binned)."},r.discreteChannelCannotEncode=function(e,t){return'Using discrete channel "'+e+'" to encode "'+t+'" field can be misleading as it does not encode '+("ordinal"===t?"order":"magnitude")+"."},r.BAR_WITH_POINT_SCALE_AND_RANGESTEP_NULL="Bar mark should not be used with point scale when rangeStep is null. Please use band scale instead.",r.unclearOrientContinuous=function(e){return'Cannot clearly determine orientation for "'+e+'" since both x and y channel encode continuous fields. In this case, we use vertical by default'},r.unclearOrientDiscreteOrEmpty=function(e){return'Cannot clearly determine orientation for "'+e+'" since both x and y channel encode discrete or empty fields.'},r.orientOverridden=function(e,t){return'Specified orient "'+e+'" overridden with "'+t+'"'},r.CANNOT_UNION_CUSTOM_DOMAIN_WITH_FIELD_DOMAIN="custom domain scale cannot be unioned with default field-based domain",r.cannotUseScalePropertyWithNonColor=function(e){return'Cannot use the scale property "'+e+'" with non-color channel.'},r.unaggregateDomainHasNoEffectForRawField=function(e){return"Using unaggregated domain with raw field has no effect ("+o.stringify(e)+")."},r.unaggregateDomainWithNonSharedDomainOp=function(e){return'Unaggregated domain not applicable for "'+e+'" since it produces values outside the origin domain of the source data.'},r.unaggregatedDomainWithLogScale=function(e){return"Unaggregated domain is currently unsupported for log scale ("+o.stringify(e)+")."},r.cannotUseSizeFieldWithBandSize=function(e){return"Using size field when "+e+"-channel has a band scale is not supported."},r.cannotApplySizeToNonOrientedMark=function(e){return'Cannot apply size to non-oriented mark "'+e+'".'},r.rangeStepDropped=function(e){return'rangeStep for "'+e+'" is dropped as top-level '+("x"===e?"width":"height")+" is provided."},r.scaleTypeNotWorkWithChannel=function(e,t,n){return'Channel "'+e+'" does not work with "'+t+'" scale. We are using "'+n+'" scale instead.'},r.scaleTypeNotWorkWithFieldDef=function(e,t){return'FieldDef does not work with "'+e+'" scale. We are using "'+t+'" scale instead.'},r.scalePropertyNotWorkWithScaleType=function(e,t,n){return n+"-scale's \""+t+'" is dropped as it does not work with '+e+" scale."},r.scaleTypeNotWorkWithMark=function(e,t){return'Scale type "'+t+'" does not work with mark "'+e+'".'},r.mergeConflictingProperty=function(e,t,n,r){return"Conflicting "+t+' property "'+e+'" ('+o.stringify(n)+" and "+o.stringify(r)+").  Using "+o.stringify(n)+"."},r.independentScaleMeansIndependentGuide=function(e){return'Setting the scale to be independent for "'+e+'" means we also have to set the guide (axis or legend) to be independent.'},r.conflictedDomain=function(e){return"Cannot set "+e+'-scale\'s "domain" as it is binned. Please use "bin"\'s "extent" instead.'},r.domainSortDropped=function(e){return"Dropping sort property "+o.stringify(e)+" as unioned domains only support boolean or op 'count'."},r.UNABLE_TO_MERGE_DOMAINS="Unable to merge domains",r.MORE_THAN_ONE_SORT="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",r.INVALID_CHANNEL_FOR_AXIS="Invalid channel for axis.",r.cannotStackRangedMark=function(e){return'Cannot stack "'+e+'" if there is already "'+e+'2"'},r.cannotStackNonLinearScale=function(e){return"Cannot stack non-linear scale ("+e+")"},r.stackNonSummativeAggregate=function(e){return'Stacking is applied even though the aggregate function is non-summative ("'+e+'")'},r.invalidTimeUnit=function(e,t){return"Invalid "+e+": "+o.stringify(t)},r.dayReplacedWithDate=function(e){return'Time unit "'+e+'" is not supported. We are replacing it with '+e.replace("day","date")+"."},r.droppedDay=function(e){return"Dropping day from datetime "+o.stringify(e)+" as day cannot be combined with other units."}},{"./util":27,"vega-util":28}],20:[function(e,t,n){"use strict";function u(e){return!!e.or}function c(e){return!!e.and}function s(e){return!!e.not}Object.defineProperty(n,"__esModule",{value:!0}),n.isLogicalOr=u,n.isLogicalAnd=c,n.isLogicalNot=s,n.forEachLeave=function e(t,n){if(s(t))e(t.not,n);else if(c(t))for(var r=0,i=t.and;r<i.length;r++)e(i[r],n);else if(u(t))for(var o=0,a=t.or;o<a.length;o++)e(a[o],n);else n(t)},n.normalizeLogicalOperand=function t(e,n){return s(e)?{not:t(e.not,n)}:c(e)?{and:e.and.map(function(e){return t(e,n)})}:u(e)?{or:e.or.map(function(e){return t(e,n)})}:n(e)}},{}],21:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i,o=e("vega-util"),a=e("./util");(i=r=n.Mark||(n.Mark={})).AREA="area",i.BAR="bar",i.LINE="line",i.POINT="point",i.RECT="rect",i.RULE="rule",i.TEXT="text",i.TICK="tick",i.CIRCLE="circle",i.SQUARE="square",i.GEOSHAPE="geoshape",n.AREA=r.AREA,n.BAR=r.BAR,n.LINE=r.LINE,n.POINT=r.POINT,n.TEXT=r.TEXT,n.TICK=r.TICK,n.RECT=r.RECT,n.RULE=r.RULE,n.GEOSHAPE=r.GEOSHAPE,n.CIRCLE=r.CIRCLE,n.SQUARE=r.SQUARE;var u={area:1,bar:1,line:1,point:1,text:1,tick:1,rect:1,geoshape:1,rule:1,circle:1,square:1};function c(e){return e.type}n.isMark=function(e){return!!u[e]},n.PRIMITIVE_MARKS=a.flagKeys(u),n.isMarkDef=c;var s=o.toSet(n.PRIMITIVE_MARKS);n.isPrimitiveMark=function(e){return(c(e)?e.type:e)in s},n.STROKE_CONFIG=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity"],n.FILL_CONFIG=["fill","fillOpacity"],n.FILL_STROKE_CONFIG=[].concat(n.STROKE_CONFIG,n.FILL_CONFIG),n.VL_ONLY_MARK_CONFIG_PROPERTIES=["filled","color"],n.VL_ONLY_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX={bar:["binSpacing","continuousBandSize","discreteBandSize"],text:["shortTimeLabels"],tick:["bandSize","thickness"]},n.defaultMarkConfig={color:"#4c78a8"},n.defaultBarConfig={binSpacing:1,continuousBandSize:5},n.defaultTickConfig={thickness:1}},{"./util":27,"vega-util":28}],22:[function(e,t,n){"use strict";var r=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n};Object.defineProperty(n,"__esModule",{value:!0});var i,o=e("vega-util"),a=e("./channel"),u=e("./log"),c=e("./util");(i=n.ScaleType||(n.ScaleType={})).LINEAR="linear",i.BIN_LINEAR="bin-linear",i.LOG="log",i.POW="pow",i.SQRT="sqrt",i.TIME="time",i.UTC="utc",i.SEQUENTIAL="sequential",i.QUANTILE="quantile",i.QUANTIZE="quantize",i.THRESHOLD="threshold",i.ORDINAL="ordinal",i.BIN_ORDINAL="bin-ordinal",i.POINT="point",i.BAND="band";var s={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric","bin-linear":"bin-linear",time:"time",utc:"time",sequential:"sequential",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position"};n.SCALE_TYPES=c.keys(s),n.scaleCompatible=function(e,t){var n=s[e],r=s[t];return n===r||"ordinal-position"===n&&"time"===r||"ordinal-position"===r&&"time"===n};var l={linear:0,log:1,pow:1,sqrt:1,time:0,utc:0,point:10,band:11,"bin-linear":0,sequential:0,ordinal:0,"bin-ordinal":0};n.scaleTypePrecedence=function(e){return l[e]},n.CONTINUOUS_TO_CONTINUOUS_SCALES=["linear","bin-linear","log","pow","sqrt","time","utc"];var f=o.toSet(n.CONTINUOUS_TO_CONTINUOUS_SCALES);n.CONTINUOUS_DOMAIN_SCALES=n.CONTINUOUS_TO_CONTINUOUS_SCALES.concat(["sequential"]);var d=o.toSet(n.CONTINUOUS_DOMAIN_SCALES);n.DISCRETE_DOMAIN_SCALES=["ordinal","bin-ordinal","point","band"];var p=o.toSet(n.DISCRETE_DOMAIN_SCALES),g=o.toSet(["bin-linear","bin-ordinal"]);function h(e){return e in d}function m(e){return e in f}n.TIME_SCALE_TYPES=["time","utc"],n.hasDiscreteDomain=function(e){return e in p},n.isBinScale=function(e){return e in g},n.hasContinuousDomain=h,n.isContinuousToContinuous=m,n.defaultScaleConfig={textXRangeStep:90,rangeStep:21,pointPadding:.5,bandPaddingInner:.1,facetSpacing:16,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4},n.isExtendedScheme=function(e){return e&&!!e.name},n.isSelectionDomain=function(e){return e&&e.selection};var v={type:1,domain:1,range:1,rangeStep:1,scheme:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1};n.SCALE_PROPERTIES=c.flagKeys(v);var y=r(v,["type","domain","range","rangeStep","scheme"]);n.NON_TYPE_DOMAIN_RANGE_VEGA_SCALE_PROPERTIES=c.flagKeys(y),n.scaleTypeSupportProperty=function(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":return c.contains(["sequential","ordinal","bin-ordinal","quantile","quantize"],e);case"interpolate":return c.contains(["linear","bin-linear","pow","log","sqrt","utc","time"],e);case"round":return m(e)||"band"===e||"point"===e;case"padding":return m(e)||c.contains(["point","band"],e);case"paddingOuter":case"rangeStep":return c.contains(["point","band"],e);case"paddingInner":return"band"===e;case"clamp":return m(e)||"sequential"===e;case"nice":return m(e)||"sequential"===e||"quantize"===e;case"exponent":return"pow"===e;case"base":return"log"===e;case"zero":return h(e)&&!c.contains(["log","time","utc","bin-linear","threshold","quantile"],e)}throw new Error("Invalid scale property "+t+".")},n.channelScalePropertyIncompatability=function(e,t){switch(t){case"interpolate":case"scheme":return a.isColorChannel(e)?void 0:u.message.cannotUseScalePropertyWithNonColor(e);case"type":case"domain":case"range":case"base":case"exponent":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeStep":case"reverse":case"round":case"clamp":case"zero":return}throw new Error('Invalid scale property "'+t+'".')},n.channelSupportScaleType=function(e,t){switch(e){case a.Channel.X:case a.Channel.Y:case a.Channel.SIZE:case a.Channel.OPACITY:return m(t)||c.contains(["band","point"],t);case a.Channel.COLOR:case a.Channel.FILL:case a.Channel.STROKE:return"band"!==t;case a.Channel.SHAPE:return"ordinal"===t}return!1}},{"./channel":11,"./log":19,"./util":27,"vega-util":28}],23:[function(e,t,n){"use strict";var U=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},I=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n};Object.defineProperty(n,"__esModule",{value:!0});var L=e("./channel"),d=e("./compositemark"),P=e("./encoding"),r=e("./encoding"),F=e("./log"),p=e("./mark"),h=e("./stack"),g=e("./util");function R(e){return void 0!==e.facet}function k(e){return!!e.mark}function j(e){return void 0!==e.layer}function H(e){return void 0!==e.repeat}function i(e){return Y(e)||q(e)}function Y(e){return void 0!==e.vconcat}function q(e){return void 0!==e.hconcat}function z(e,t){if(R(e))return r=t,i=(n=e).spec,o=I(n,["spec"]),U({},o,{spec:z(i,r)});var n,r,i,o,a,u,c,s,l,f,d,p,g,h,m,v,y,T,O,S,_,b,E,w,A,C,N,D;if(j(e))return function t(e,n,r,i){var o=e.layer,a=e.encoding,u=e.projection,c=I(e,["layer","encoding","projection"]);var s=B({parentEncoding:r,encoding:a});var l=W({parentProjection:i,projection:u});return U({},c,{layer:o.map(function(e){return j(e)?t(e,n,s,l):X(e,n,s,l)})})}(e,t);if(H(e))return u=t,c=(a=e).spec,s=I(a,["spec"]),U({},s,{spec:z(c,u)});if(Y(e))return f=t,d=(l=e).vconcat,p=I(l,["vconcat"]),U({},p,{vconcat:d.map(function(e){return z(e,f)})});if(q(e))return h=t,m=(g=e).hconcat,v=I(g,["hconcat"]),U({},v,{hconcat:m.map(function(e){return z(e,h)})});if(k(e)){var M=P.channelHasField(e.encoding,L.ROW),x=P.channelHasField(e.encoding,L.COLUMN);return M||x?(T=t,O=(y=e).encoding,S=O.row,_=O.column,b=I(O,["row","column"]),E=y.mark,w=y.width,A=y.projection,C=y.height,N=y.selection,y.encoding,D=I(y,["mark","width","projection","height","selection","encoding"]),U({},D,{facet:U({},S?{row:S}:{},_?{column:_}:{}),spec:X(U({},A?{projection:A}:{},{mark:E},w?{width:w}:{},C?{height:C}:{},{encoding:b},N?{selection:N}:{}),T)})):X(e,t)}throw new Error(F.message.INVALID_SPEC)}function B(e){var t=e.parentEncoding,n=e.encoding;if(t&&n){var r=g.keys(t).reduce(function(e,t){return n[t]&&e.push(t),e},[]);0<r.length&&F.warn(F.message.encodingOverridden(r))}var i=U({},t||{},n||{});return 0<g.keys(i).length?i:void 0}function W(e){var t=e.parentProjection,n=e.projection;return t&&n&&F.warn(F.message.projectionOverridden({parentProjection:t,projection:n})),n||t}function X(e,t,n,r){var i,o=e.encoding,a=e.projection;if(n||r){var u=W({parentProjection:r,projection:a}),c=B({parentEncoding:n,encoding:o});return X(U({},e,u?{projection:u}:{},c?{encoding:c}:{}),t)}if(i=e,p.isPrimitiveMark(i.mark)){if(P.isRanged(o))return function(e){var t=P.channelHasField(e.encoding,L.X),n=P.channelHasField(e.encoding,L.Y),r=P.channelHasField(e.encoding,L.X2),i=P.channelHasField(e.encoding,L.Y2);if(r&&!t||i&&!n){var o=g.duplicate(e);return r&&!t&&(o.encoding.x=o.encoding.x2,delete o.encoding.x2),i&&!n&&(o.encoding.y=o.encoding.y2,delete o.encoding.y2),o}return e}(e);var s=t&&t.overlay,l=s&&e.mark===p.AREA&&g.contains(["linepoint","line"],s.area),f=s&&(s.line&&e.mark===p.LINE||"linepoint"===s.area&&e.mark===p.AREA);return f||l?function(e,t,n,r){var i,o=e.mark,a=e.selection,u=e.projection,c=e.encoding,s=I(e,["mark","selection","projection","encoding"]),l=[{mark:o,encoding:c}],f=h.stack(o,c,r?r.stack:void 0),d=c;if(f){var p=f.fieldChannel,g=f.offset;d=U({},c,((i={})[p]=U({},c[p],g?{stack:g}:{}),i))}n&&l.push(U({},u?{projection:u}:{},{mark:{type:"line",style:"lineOverlay"}},a?{selection:a}:{},{encoding:d}));t&&l.push(U({},u?{projection:u}:{},{mark:{type:"point",filled:!0,style:"pointOverlay"}},a?{selection:a}:{},{encoding:d}));return U({},s,{layer:l})}(e,f,l,t):e}return d.normalize(e,t)}function o(r,e){return e.forEach(function(n){var e=["field","type","value","timeUnit","bin","aggregate"].reduce(function(e,t){return void 0!==n[t]&&(e[t]=n[t]),e},{}),t=g.hash(e);r[t]=r[t]||n}),r}n.isFacetSpec=R,n.isUnitSpec=k,n.isLayerSpec=j,n.isRepeatSpec=H,n.isConcatSpec=i,n.isVConcatSpec=Y,n.isHConcatSpec=q,n.normalize=z,n.fieldDefs=function(e){return g.vals(function t(e,n){return void 0===n&&(n={}),j(e)?e.layer.forEach(function(e){k(e)?o(n,r.fieldDefs(e.encoding)):t(e,n)}):R(e)?(o(n,r.fieldDefs(e.facet)),t(e.spec,n)):H(e)?t(e.spec,n):i(e)?(Y(e)?e.vconcat:e.hconcat).forEach(function(e){return t(e,n)}):o(n,r.fieldDefs(e.encoding)),n}(e))},n.isStacked=function(e,t){return t=t||e.config,!!p.isPrimitiveMark(e.mark)&&null!==h.stack(e.mark,e.encoding,t?t.stack:void 0)}},{"./channel":11,"./compositemark":15,"./encoding":17,"./log":19,"./mark":21,"./stack":24,"./util":27}],24:[function(e,t,d){"use strict";Object.defineProperty(d,"__esModule",{value:!0});var p=e("vega-util"),g=e("./aggregate"),h=e("./channel"),m=e("./encoding"),v=e("./fielddef"),y=e("./log"),T=e("./mark"),O=e("./scale"),S=e("./util"),n={zero:1,center:1,normalize:1};function _(e){return!!n[e]}d.isStackOffset=_,d.STACKABLE_MARKS=[T.BAR,T.AREA,T.RULE,T.POINT,T.CIRCLE,T.SQUARE,T.LINE,T.TEXT,T.TICK],d.STACK_BY_DEFAULT_MARKS=[T.BAR,T.AREA],d.stack=function(e,t,n){var r=T.isMarkDef(e)?e.type:e;if(!S.contains(d.STACKABLE_MARKS,r))return null;var i=function(e){var t=e.x,n=e.y;if(v.isFieldDef(t)&&v.isFieldDef(n))if("quantitative"===t.type&&"quantitative"===n.type){if(t.stack)return"x";if(n.stack)return"y";if(!!t.aggregate!=!!n.aggregate)return t.aggregate?"x":"y"}else{if("quantitative"===t.type)return"x";if("quantitative"===n.type)return"y"}else{if(v.isFieldDef(t)&&"quantitative"===t.type)return"x";if(v.isFieldDef(n)&&"quantitative"===n.type)return"y"}}(t);if(!i)return null;var o=t[i],a=v.isStringFieldDef(o)?v.vgField(o,{}):void 0,u="x"===i?"y":"x",c=t[u],s=v.isStringFieldDef(c)?v.vgField(c,{}):void 0,l=h.NONPOSITION_CHANNELS.reduce(function(r,i){if(m.channelHasField(t,i)){var e=t[i];(p.isArray(e)?e:[e]).forEach(function(e){var t=v.getFieldDef(e);if(!t.aggregate){var n=v.isStringFieldDef(t)?v.vgField(t,{}):void 0;(!n||n!==s&&n!==a)&&r.push({channel:i,fieldDef:t})}})}return r},[]);if(0===l.length)return null;var f=void 0;return(f=void 0!==o.stack?o.stack:S.contains(d.STACK_BY_DEFAULT_MARKS,r)&&void 0===n?"zero":n)&&_(f)?o.scale&&o.scale.type&&o.scale.type!==O.ScaleType.LINEAR?(y.warn(y.message.cannotStackNonLinearScale(o.scale.type)),null):m.channelHasField(t,i===h.X?h.X2:h.Y2)?(y.warn(y.message.cannotStackRangedMark(i)),null):(o.aggregate&&!S.contains(g.SUM_OPS,o.aggregate)&&y.warn(y.message.stackNonSummativeAggregate(o.aggregate)),{groupbyChannel:c?u:void 0,fieldChannel:i,impute:S.contains(["area","line"],r),stackBy:l,offset:f}):null}},{"./aggregate":9,"./channel":11,"./encoding":17,"./fielddef":18,"./log":19,"./mark":21,"./scale":22,"./util":27,"vega-util":28}],25:[function(e,t,f){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(f,"__esModule",{value:!0});var d,r,a=e("./datetime"),i=e("./log"),u=e("./util");(r=d=f.TimeUnit||(f.TimeUnit={})).YEAR="year",r.MONTH="month",r.DAY="day",r.DATE="date",r.HOURS="hours",r.MINUTES="minutes",r.SECONDS="seconds",r.MILLISECONDS="milliseconds",r.YEARMONTH="yearmonth",r.YEARMONTHDATE="yearmonthdate",r.YEARMONTHDATEHOURS="yearmonthdatehours",r.YEARMONTHDATEHOURSMINUTES="yearmonthdatehoursminutes",r.YEARMONTHDATEHOURSMINUTESSECONDS="yearmonthdatehoursminutesseconds",r.MONTHDATE="monthdate",r.HOURSMINUTES="hoursminutes",r.HOURSMINUTESSECONDS="hoursminutesseconds",r.MINUTESSECONDS="minutesseconds",r.SECONDSMILLISECONDS="secondsmilliseconds",r.QUARTER="quarter",r.YEARQUARTER="yearquarter",r.QUARTERMONTH="quartermonth",r.YEARQUARTERMONTH="yearquartermonth",r.UTCYEAR="utcyear",r.UTCMONTH="utcmonth",r.UTCDAY="utcday",r.UTCDATE="utcdate",r.UTCHOURS="utchours",r.UTCMINUTES="utcminutes",r.UTCSECONDS="utcseconds",r.UTCMILLISECONDS="utcmilliseconds",r.UTCYEARMONTH="utcyearmonth",r.UTCYEARMONTHDATE="utcyearmonthdate",r.UTCYEARMONTHDATEHOURS="utcyearmonthdatehours",r.UTCYEARMONTHDATEHOURSMINUTES="utcyearmonthdatehoursminutes",r.UTCYEARMONTHDATEHOURSMINUTESSECONDS="utcyearmonthdatehoursminutesseconds",r.UTCMONTHDATE="utcmonthdate",r.UTCHOURSMINUTES="utchoursminutes",r.UTCHOURSMINUTESSECONDS="utchoursminutesseconds",r.UTCMINUTESSECONDS="utcminutesseconds",r.UTCSECONDSMILLISECONDS="utcsecondsmilliseconds",r.UTCQUARTER="utcquarter",r.UTCYEARQUARTER="utcyearquarter",r.UTCQUARTERMONTH="utcquartermonth",r.UTCYEARQUARTERMONTH="utcyearquartermonth";var o={year:1,quarter:1,month:1,day:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};f.TIMEUNIT_PARTS=u.flagKeys(o),f.isLocalSingleTimeUnit=function(e){return!!o[e]};var c={utcyear:1,utcquarter:1,utcmonth:1,utcday:1,utcdate:1,utchours:1,utcminutes:1,utcseconds:1,utcmilliseconds:1};f.isUtcSingleTimeUnit=function(e){return!!c[e]};var s={utcyearquarter:1,utcyearquartermonth:1,utcyearmonth:1,utcyearmonthdate:1,utcyearmonthdatehours:1,utcyearmonthdatehoursminutes:1,utcyearmonthdatehoursminutesseconds:1,utcquartermonth:1,utcmonthdate:1,utchoursminutes:1,utchoursminutesseconds:1,utcminutesseconds:1,utcsecondsmilliseconds:1},l=n({},c,s);function p(e){return!!l[e]}f.isUTCTimeUnit=p,f.getLocalTimeUnit=function(e){return e.substr(3)};var g=n({},o,c,{yearquarter:1,yearquartermonth:1,yearmonth:1,yearmonthdate:1,yearmonthdatehours:1,yearmonthdatehoursminutes:1,yearmonthdatehoursminutesseconds:1,quartermonth:1,monthdate:1,hoursminutes:1,hoursminutesseconds:1,minutesseconds:1,secondsmilliseconds:1},s);f.TIMEUNITS=u.flagKeys(g),f.isTimeUnit=function(e){return!!g[e]};var h={year:"setFullYear",month:"setMonth",date:"setDate",hours:"setHours",minutes:"setMinutes",seconds:"setSeconds",milliseconds:"setMilliseconds",quarter:null,day:null};function m(e,t){var n=h[e];return{setDateMethod:t?"setUTC"+n.substr(3):n,getDateMethod:"get"+(t?"UTC":"")+n.substr(3)}}function v(e,t){var n=e.indexOf(t);return-1<n&&(t!==d.SECONDS||0===n||"i"!==e.charAt(n-1))}f.convert=function(e,t){for(var n=p(e),r=n?new Date(Date.UTC(0,0,1,0,0,0,0)):new Date(0,0,1,0,0,0,0),i=0,o=f.TIMEUNIT_PARTS;i<o.length;i++){var a=o[i];if(v(e,a))switch(a){case d.DAY:throw new Error("Cannot convert to TimeUnits containing 'day'");case d.QUARTER:var u=m("month",n),c=u.getDateMethod;r[u.setDateMethod](3*Math.floor(t[c]()/3));break;default:var s=m(a,n),l=s.getDateMethod;r[s.setDateMethod](t[l]())}}return r},f.getTimeUnitParts=function(n){return f.TIMEUNIT_PARTS.reduce(function(e,t){return v(n,t)?e.concat(t):e},[])},f.containsTimeUnit=v,f.fieldExpr=function(r,e){var i="datum"+u.accessPath(e),o=p(r)?"utc":"",t=f.TIMEUNIT_PARTS.reduce(function(e,t){var n;return v(r,t)&&(e[t]=(n=t)===d.QUARTER?"("+o+"quarter("+i+")-1)":""+o+n+"("+i+")"),e},{});return a.dateTimeExpr(t)},f.formatExpression=function(e,t,n,r){if(e){var i=[],o="",a=v(e,d.YEAR);v(e,d.QUARTER)&&(o="'Q' + quarter("+t+")"),v(e,d.MONTH)&&i.push(!1!==n?"%b":"%B"),v(e,d.DAY)?i.push(n?"%a":"%A"):v(e,d.DATE)&&i.push("%d"+(a?",":"")),a&&i.push(n?"%y":"%Y");var u=[];v(e,d.HOURS)&&u.push("%H"),v(e,d.MINUTES)&&u.push("%M"),v(e,d.SECONDS)&&u.push("%S"),v(e,d.MILLISECONDS)&&u.push("%L");var c=[];return 0<i.length&&c.push(i.join(" ")),0<u.length&&c.push(u.join(":")),0<c.length&&(o&&(o+=" + ' ' + "),o+=r?"utcFormat("+t+", '"+c.join(" ")+"')":"timeFormat("+t+", '"+c.join(" ")+"')"),o||void 0}},f.normalizeTimeUnit=function(e){return"day"!==e&&0<=e.indexOf("day")?(i.warn(i.message.dayReplacedWithDate(e)),e.replace("day","date")):e}},{"./datetime":16,"./log":19,"./util":27}],26:[function(e,t,n){"use strict";var r,i;Object.defineProperty(n,"__esModule",{value:!0}),(i=r=n.Type||(n.Type={})).QUANTITATIVE="quantitative",i.ORDINAL="ordinal",i.TEMPORAL="temporal",i.NOMINAL="nominal",i.LATITUDE="latitude",i.LONGITUDE="longitude",i.GEOJSON="geojson";var o={quantitative:1,ordinal:1,temporal:1,nominal:1,latitude:1,longitude:1,geojson:1};n.isType=function(e){return!!o[e]},n.QUANTITATIVE=r.QUANTITATIVE,n.ORDINAL=r.ORDINAL,n.TEMPORAL=r.TEMPORAL,n.NOMINAL=r.NOMINAL,n.GEOJSON=r.GEOJSON,n.getFullName=function(e){if(e)switch(e=e.toLowerCase()){case"q":case n.QUANTITATIVE:return"quantitative";case"t":case n.TEMPORAL:return"temporal";case"o":case n.ORDINAL:return"ordinal";case"n":case n.NOMINAL:return"nominal";case r.LATITUDE:return"latitude";case r.LONGITUDE:return"longitude";case n.GEOJSON:return"geojson"}}},{}],27:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var i=e("json-stable-stringify"),a=e("vega-util"),r=e("./logical");function n(e,t){return-1<e.indexOf(t)}function u(e,t){return e.filter(function(e){return!n(t,e)})}function c(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++){e=s(e,i[r])}return e}function s(e,t){if("object"!=typeof t||null===t)return e;for(var n in t)t.hasOwnProperty(n)&&void 0!==t[n]&&("object"!=typeof t[n]||a.isArray(t[n])||null===t[n]?e[n]=t[n]:"object"!=typeof e[n]||null===e[n]?e[n]=c(a.isArray(t[n].constructor)?[]:{},t[n]):c(e[n],t[n]));return e}function l(e){return JSON.parse(JSON.stringify(e))}o.pick=function(e,t){for(var n={},r=0,i=t;r<i.length;r++){var o=i[r];e.hasOwnProperty(o)&&(n[o]=e[o])}return n},o.omit=function(e,t){for(var n=l(e),r=0,i=t;r<i.length;r++)delete n[i[r]];return n},o.stringify=i,o.hash=function(e){if(a.isNumber(e))return e;var t=a.isString(e)?e:i(e);if(t.length<100)return t;for(var n=0,r=0;r<t.length;r++)n=(n<<5)-n+t.charCodeAt(r),n&=n;return n},o.contains=n,o.without=u,o.union=function(e,t){return e.concat(u(t,e))},o.some=function(e,t){for(var n=0,r=0;r<e.length;r++)if(t(e[r],r,n++))return!0;return!1},o.every=function(e,t){for(var n=0,r=0;r<e.length;r++)if(!t(e[r],r,n++))return!1;return!0},o.flatten=function(e){return[].concat.apply([],e)},o.mergeDeep=c,o.unique=function(e,t){for(var n,r=[],i={},o=0,a=e;o<a.length;o++){var u=a[o];(n=t(u))in i||(i[n]=1,r.push(u))}return r},o.differ=function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t[n]&&e[n]&&t[n]!==e[n])return!0;return!1},o.hasIntersection=function(e,t){for(var n in e)if(n in t)return!0;return!1},o.isNumeric=function(e){return!isNaN(e)},o.differArray=function(e,t){if(e.length!==t.length)return!0;e.sort(),t.sort();for(var n=0;n<e.length;n++)if(t[n]!==e[n])return!0;return!1},o.keys=Object.keys,o.vals=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t},o.flagKeys=function(e){return o.keys(e)},o.duplicate=l,o.isBoolean=function(e){return!0===e||!1===e},o.varName=function(e){var t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t},o.logicalExpr=function t(e,n){return r.isLogicalNot(e)?"!("+t(e.not,n)+")":r.isLogicalAnd(e)?"("+e.and.map(function(e){return t(e,n)}).join(") && (")+")":r.isLogicalOr(e)?"("+e.or.map(function(e){return t(e,n)}).join(") || (")+")":n(e)},o.deleteNestedProperty=function(e,t){for(var n=!0;0<t.length&&n;){for(var r=e,i=0;i<t.length-1;i++)r=r[t[i]];delete r[t.pop()],0!==o.keys(r).length&&(n=!1)}},o.titlecase=function(e){return e.charAt(0).toUpperCase()+e.substr(1)},o.accessPath=function(e){return"["+a.splitAccessPath(e).map(a.stringValue).join("][")+"]"}},{"./logical":20,"json-stable-stringify":5,"vega-util":28}],28:[function(e,t,n){var r;r=this,function(e){"use strict";var m=function(e,t,n){return e.fields=t||[],e.fname=n,e};function v(e){return null==e?null:e.fields}var l=function(e){throw Error(e)},y=function(e){var t,n,r,i=[],o=null,a=0,u=e.length,c="";function s(){i.push(c+e.substring(t,n)),c="",t=n+1}for(e+="",t=n=0;n<u;++n)if("\\"===(r=e[n]))c+=e.substring(t,n),t=++n;else if(r===o)s(),o=null,a=-1;else{if(o)continue;t===a&&'"'===r?(t=n+1,o=r):t===a&&"'"===r?(t=n+1,o=r):"."!==r||a?"["===r?(t<n&&s(),a=t=n+1):"]"===r&&(a||l("Access path missing open bracket: "+e),0<a&&s(),a=0,t=n+1):t<n?s():t=n+1}return a&&l("Access path missing closing bracket: "+e),o&&l("Access path missing closing quote: "+e),t<n&&(n++,s()),i},t=Array.isArray,n=function(e){return e===Object(e)},r=function(e){return"string"==typeof e};function T(e){return t(e)?"["+e.map(T)+"]":n(e)||r(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}var i=function(e,t){var n=y(e),r="return _["+n.map(T).join("][")+"];";return m(Function("_",r),[e=1===n.length?n[0]:e],t||e)},o=[],a=i("id"),u=m(function(e){return e},o,"identity"),c=m(function(){return 0},o,"zero"),s=m(function(){return 1},o,"one"),f=m(function(){return!0},o,"true"),d=m(function(){return!1},o,"false");function p(e,t,n){var r=[t].concat([].slice.call(n));console[e].apply(console,r)}var g=function(e){return e[e.length-1]},h=function(e){return null==e||""===e?null:+e};function O(t){return function(e){return t*Math.exp(e)}}function S(t){return function(e){return Math.log(t*e)}}function _(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function b(e,t,n,r){var i=n(e[0]),o=n(g(e)),a=(o-i)*t;return[r(i-a),r(o-a)]}function E(e,t,n,r,i){var o=r(e[0]),a=r(g(e)),u=null!=t?r(t):(o+a)/2;return[i(u+(o-u)*n),i(u+(a-u)*n)]}var w=function(e){return null!=e?t(e)?e:[e]:[]},A=function(e){return"function"==typeof e},C={},N=function(e){return"[object Date]"===Object.prototype.toString.call(e)},D=function(e){return"number"==typeof e},M=function(e,t){for(var n="";0<=--t;)n+=e;return n};function x(e){return D(e)?e:N(e)?e:Date.parse(e)}e.accessor=m,e.accessorName=function(e){return null==e?null:e.fname},e.accessorFields=v,e.id=a,e.identity=u,e.zero=c,e.one=s,e.truthy=f,e.falsy=d,e.logger=function(e){var t=e||0;return{level:function(e){return arguments.length?(t=+e,this):t},error:function(){return 1<=t&&p("error","ERROR",arguments),this},warn:function(){return 2<=t&&p("warn","WARN",arguments),this},info:function(){return 3<=t&&p("log","INFO",arguments),this},debug:function(){return 4<=t&&p("log","DEBUG",arguments),this}}},e.None=0,e.Error=1,e.Warn=2,e.Info=3,e.Debug=4,e.panLinear=function(e,t){return b(e,t,h,u)},e.panLog=function(e,t){var n=Math.sign(e[0]);return b(e,t,S(n),O(n))},e.panPow=function(e,t,n){return b(e,t,_(n),_(1/n))},e.zoomLinear=function(e,t,n){return E(e,t,n,h,u)},e.zoomLog=function(e,t,n){var r=Math.sign(e[0]);return E(e,t,n,S(r),O(r))},e.zoomPow=function(e,t,n,r){return E(e,t,n,_(r),_(1/r))},e.array=w,e.compare=function(e,t){var n,r,i,o,a,u,c,s,l,f=[],d=(e=w(e)).map(function(e,t){return null==e?null:(f.push(t),A(e)?e:y(e).map(T).join("]["))}),p=f.length-1,g=w(t),h="var u,v;return ";if(p<0)return null;for(r=0;r<=p;++r)i=d[n=f[r]],A(i)?(o="(u=this."+(u="f"+n)+"(a))",a="(v=this."+u+"(b))",(c=c||{})[u]=i):(o="(u=a["+i+"])",a="(v=b["+i+"])"),u="((v=v instanceof Date?+v:v),(u=u instanceof Date?+u:u))","descending"!==g[n]?s=-(l=1):(l=-1,s=1),h+="("+o+"<"+a+"||u==null)&&v!=null?"+s+":(u>v||v==null)&&u!=null?"+l+":"+u+"!==u&&v===v?"+s+":v!==v&&u===u?"+l+(n<p?":":":0");return i=Function("a","b",h+";"),c&&(i=i.bind(c)),e=e.reduce(function(t,e){return A(e)?(v(e)||[]).forEach(function(e){t[e]=1}):null!=e&&(t[e+""]=1),t},{}),m(i,Object.keys(e))},e.constant=function(e){return A(e)?e:function(){return e}},e.debounce=function(t,e){var n,r;function i(){e(r),n=r=null}return function(e){r=e,n&&clearTimeout(n),n=setTimeout(i,t)}},e.error=l,e.extend=function(e){for(var t,n,r=1,i=arguments.length;r<i;++r)for(n in t=arguments[r])e[n]=t[n];return e},e.extentIndex=function(e,t){var n,r,i,o,a,u=-1,c=e.length;if(null==t){for(;++u<c;)if(null!=(r=e[u])&&r<=r){n=i=r;break}for(o=a=u;++u<c;)null!=(r=e[u])&&(r<n&&(n=r,o=u),i<r&&(i=r,a=u))}else{for(;++u<c;)if(null!=(r=t(e[u],u,e))&&r<=r){n=i=r;break}for(o=a=u;++u<c;)null!=(r=t(e[u],u,e))&&(r<n&&(n=r,o=u),i<r&&(i=r,a=u))}return[o,a]},e.fastmap=function(t){var i,o,a={};function n(e){return a.hasOwnProperty(e)&&a[e]!==C}return i={size:0,empty:0,object:a,has:n,get:function(e){return n(e)?a[e]:void 0},set:function(e,t){return n(e)||(++i.size,a[e]===C&&--i.empty),a[e]=t,this},delete:function(e){return n(e)&&(--i.size,++i.empty,a[e]=C),this},clear:function(){i.size=i.empty=0,i.object=a={}},test:function(e){return arguments.length?(o=e,i):o},clean:function(){var e,t,n={},r=0;for(e in a)(t=a[e])===C||o&&o(t)||(n[e]=t,++r);i.size=r,i.empty=0,i.object=a=n}},t&&Object.keys(t).forEach(function(e){i.set(e,t[e])}),i},e.field=i,e.inherits=function(e,t){var n=e.prototype=Object.create(t.prototype);return n.constructor=e,n},e.isArray=t,e.isBoolean=function(e){return"boolean"==typeof e},e.isDate=N,e.isFunction=A,e.isNumber=D,e.isObject=n,e.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},e.isString=r,e.key=function(e,t){e&&(e=t?w(e).map(function(e){return e.replace(/\\(.)/g,"$1")}):w(e));var n=e&&e.length?Function("_","return ''+"+e.map(function(e){return"_["+(t?T(e):y(e).map(T).join("]["))+"]"}).join("+'|'+")+";"):function(){return""};return m(n,e,"key")},e.merge=function(e,t,n,r){var i=t.length,o=n.length;if(!o)return t;if(!i)return n;for(var a=r||new t.constructor(i+o),u=0,c=0,s=0;u<i&&c<o;++s)a[s]=0<e(t[u],n[c])?n[c++]:t[u++];for(;u<i;++u,++s)a[s]=t[u];for(;c<o;++c,++s)a[s]=n[c];return a},e.pad=function(e,t,n,r){var i=n||" ",o=e+"",a=t-o.length;return a<=0?o:"left"===r?M(i,a)+o:"center"===r?M(i,~~(a/2))+o+M(i,Math.ceil(a/2)):o+M(i,a)},e.peek=g,e.repeat=M,e.splitAccessPath=y,e.stringValue=T,e.toBoolean=function(e){return null==e||""===e?null:!(!e||"false"===e||"0"===e||!e)},e.toDate=function(e,t){return t=t||x,null==e||""===e?null:t(e)},e.toNumber=h,e.toString=function(e){return null==e||""===e?null:e+""},e.toSet=function(e){for(var t={},n=0,r=e.length;n<r;++n)t[e[n]]=!0;return t},e.truncate=function(e,t,n,r){var i=null!=r?r:"â¦",o=e+"",a=o.length,u=Math.max(0,t-i.length);return a<=t?o:"left"===n?i+o.slice(a-u):"center"===n?o.slice(0,Math.ceil(u/2))+i+o.slice(a-~~(u/2)):o.slice(0,u)+i},e.visitArray=function(e,t,n){if(e){var r,i=0,o=e.length;if(t)for(;i<o;++i)(r=t(e[i]))&&n(r,i,e);else e.forEach(n)}},Object.defineProperty(e,"__esModule",{value:!0})}("object"==typeof n&&void 0!==t?n:r.vega=r.vega||{})},{}],29:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("d3-format"),s=e("d3-time"),l=e("d3-time-format"),i=e("vega-util");function o(e){return e%1==0?r.format(",")(e):r.format(",.2f")(e)}function a(e){var t=l.timeFormat(".%L"),n=l.timeFormat(":%S"),r=l.timeFormat("%I:%M"),i=l.timeFormat("%I %p"),o=l.timeFormat("%a %d"),a=l.timeFormat("%b %d"),u=l.timeFormat("%B"),c=l.timeFormat("%Y");return(s.timeSecond(e)<e?t:s.timeMinute(e)<e?n:s.timeHour(e)<e?r:s.timeDay(e)<e?i:s.timeMonth(e)<e?s.timeWeek(e)<e?o:a:s.timeYear(e)<e?u:c)(e)}n.customFormat=function(e,t,n){if(null!=e&&(t||n)){if(i.isString(n))switch(t){case"time":return n?l.timeFormat(n)(e):a(e);case"number":return n?r.format(n)(e):o(e);case"string":default:return e}return i.isFunction(n)?n(e):void 0}},n.autoFormat=function(e){return i.isNumber(e)?o(e):i.isDate(e)?a(e):e},n.autoNumberFormat=o,n.autoTimeFormat=a},{"d3-format":1,"d3-time":4,"d3-time-format":3,"vega-util":28}],30:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("d3-selection"),r=e("./options"),a=e("./parseOption"),i=e("./supplementField"),u=e("./tooltipDisplay"),c=void 0,s=!1;function l(e,n){e.addEventListener("mouseover.tooltipInit",function(e,t){d(t)&&(f(),c=window.setTimeout(function(){!function(e,t,n){var r=u.getTooltipPlaceholder(),i=a.getTooltipData(t,n);if(!i||0===i.length)return;u.bindData(r,i),u.updatePosition(e,n),u.updateColorTheme(n),o.select("#vis-tooltip").style("visibility","visible"),s=!0,n.onAppear&&n.onAppear(e,t)}(e,t,n)},n.delay||r.DELAY))}),e.addEventListener("mousemove.tooltipUpdate",function(e,t){d(t)&&s&&function(e,t,n){if(!d(t))return;u.updatePosition(e,n),n.onMove&&n.onMove(e,t)}(e,t,n)}),e.addEventListener("mouseout.tooltipRemove",function(e,t){d(t)&&(f(),s&&function(e,t,n){if(!d(t))return;o.select("#vis-tooltip").style("visibility","hidden"),s=!1,u.clearData(),u.clearColorTheme(),u.clearPosition(),n.onDisappear&&n.onDisappear(e,t)}(e,t,n))})}function f(){window.clearTimeout(c),c=void 0}function d(e){return!(!e||!e.datum)&&!e.datum._facetID}function p(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}n.vega=function(e,t){return void 0===t&&(t={showAllFields:!0,isComposition:!1}),l(e,p(t)),{destroy:function(){e.removeEventListener("mouseover.tooltipInit"),e.removeEventListener("mousemove.tooltipUpdate"),e.removeEventListener("mouseout.tooltipRemove"),f()}}},n.vegaLite=function(e,t,n){return void 0===n&&(n={showAllFields:!0,isComposition:!1}),n=i.supplementOptions(p(n),t),l(e,p(n)),{destroy:function(){e.removeEventListener("mouseover.tooltipInit"),e.removeEventListener("mousemove.tooltipUpdate"),e.removeEventListener("mouseout.tooltipRemove"),f()}}}},{"./options":31,"./parseOption":32,"./supplementField":33,"./tooltipDisplay":34,"d3-selection":2}],31:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.DELAY=100},{}],32:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var s=e("vega-util"),p=e("./formatFieldValue");function c(a,u){void 0===u&&(u={});var c=[];return u.fields.forEach(function(e){var t=s.isString(e.title)?e.title:void 0,n=s.isFunction(e.title)?e.title:void 0,r=n&&n(a)||t||e.field,i=e.valueAccessor&&e.valueAccessor(a)||l(a,e.field,u.isComposition);if(void 0!==i){var o=p.customFormat(i,e.formatType,e.format)||p.autoFormat(i);c.push({title:r,value:o,rawValue:i,render:e.render})}}),c}function l(e,t,n){var r,i=t.split("."),o=i[0];return i.shift(),e[o]&&(r=e[o],i.forEach(function(e){(r=r)[e]&&(r=r[e])})),void 0===r?void(n||console.warn("[Tooltip] Cannot find field "+t+" in data.")):r}function f(e,t){void 0===t&&(t={});var n=[],r={};if(t&&t.fields)for(var i=0,o=t.fields;i<o.length;i++){var a=o[i];r[a.field]=a}for(var u in e)if(e.hasOwnProperty(u)){var c=e[u],s=void 0;s=r[u]&&r[u].title?r[u].title:u;var l=void 0,f=void 0;r[u]&&(l=r[u].formatType,f=r[u].format);var d=p.customFormat(c,l,f)||p.autoFormat(c);n.push({title:s,value:d,rawValue:c})}return n}function d(t,e){e.forEach(function(e){delete t[e]})}function g(t,e){e&&e.forEach(function(e){e.removeOriginalTemporalField&&d(t,[e.removeOriginalTemporalField])})}function h(c,e){if(e)return e.forEach(function(e){if(!0===e.bin){var t=e.field,n=t,r=t.concat("_mid"),i=t.concat("_end"),o=c[n],a=c[i];if(void 0!==o&&void 0!==a){var u=o+"-"+a;c[t]=u}d(c,[r,i])}}),c}function m(e,t){if("line"===e||"area"===e){var n=[];for(var r in t)if(t.hasOwnProperty(r)){var i=t[r];s.isDate(i)&&n.push(r)}d(t,n)}}n.getTooltipData=function(e,t){if("group"!==e.mark.marktype){var n,r,i={};for(var o in e.datum)e.datum.hasOwnProperty(o)&&(i[o]=e.datum[o]);if(d(i,["width","height","count_start","count_end","layout_start","layout_mid","layout_end","layout_path","layout_x","layout_y"]),g(i,t.fields),h(i,t.fields),m(e.mark.marktype,i),n=!0===t.showAllFields?f(i,t):c(i,t),t.sort){var a="title"===t.sort?"title":"value"===t.sort?"rawValue":null,u=a?(r=a,function(e,t){return s.isNumber(e[r])&&s.isNumber(t[r])?t[r]-e[r]:s.isString(e[r])&&s.isString(t[r])?e[r].localeCompare(t[r]):s.isDate(e[r])&&s.isDate(t[r])?e[r]-t[r]:s.isDate(e[r])?-1:s.isDate(t[r])?1:s.isNumber(e[r])?-1:(s.isNumber(t[r]),1)}):s.isFunction(t.sort)&&t.sort;u&&(n=n.sort(u))}return n}},n.prepareCustomFieldsData=c,n.getValue=l,n.prepareAllFieldsData=f,n.removeFields=d,n.removeDuplicateTimeFields=g,n.combineBinFields=h,n.dropFieldsForLineArea=m},{"./formatFieldValue":29,"vega-util":28}],33:[function(n,e,r){(function(e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var l="undefined"!=typeof window?window.vl:void 0!==e?e.vl:null,t=n("vega-lite/build/src/spec"),f=n("vega-lite/build/src/type"),d={quantitative:"number",temporal:"time",ordinal:void 0,nominal:void 0};function a(e,t){if(t&&e&&!(e.length<=0))if(t.aggregate){for(var n=0,r=e;n<r.length;n++){if((c=r[n]).field===t.field&&c.aggregate===t.aggregate)return c}for(var i=0,o=e;i<o.length;i++){if((c=o[i]).field===t.field&&!c.aggregate)return c}}else for(var a=0,u=e;a<u.length;a++){var c;if((c=u[a]).field===t.field)return c}}function u(e,t){if(t&&t.field&&e)for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i.field===t.field){if(!i.aggregate)return i;if(i.aggregate===t.aggregate||!t.aggregate)return i}}}function c(e,t,n,r){if(void 0===n&&(n={}),e||t){!e&&t&&(e={}),e&&!t&&(t={});var i={};if(t.bin&&(t.bin=l.fieldDef.normalizeBin(t.bin,void 0)),i.field=l.fieldDef.vgField(t)||e.field,t.type===f.TEMPORAL&&t.timeUnit){var o=t.field;i.removeOriginalTemporalField=o;for(var a=0,u=l.spec.fieldDefs(r);a<u.length;a++){var c=u[a];if(c.field===o&&!c.timeUnit){i.removeOriginalTemporalField=void 0;break}}}n.countTitle||(n.countTitle=l.config.defaultConfig.countTitle);var s=l.fieldDef.title(t,n);if("axis"in t&&t.axis&&t.axis.title&&(s=t.axis.title),"legend"in t&&t.legend&&t.legend.title&&(s=t.legend.title),i.title=e.title||s,i.formatType=e.formatType||d[t.type],e.format)i.format=e.format;else switch(i.formatType){case"time":i.format=t.timeUnit?l.timeUnit.formatExpression(t.timeUnit,"",!1,!1).split("'")[1]:n.timeFormat||l.config.defaultConfig.timeFormat;break;case"number":i.format=n.numberFormat}return t.bin&&(i.field=i.field.replace("_start","_range"),i.bin=!0,i.formatType="string"),i}console.error("[Tooltip] Cannot supplement a field when field and fieldDef are both empty.")}r.supplementOptions=function(n,r){var e,i=[],o=t.normalize(r,{});return!1!==n.showAllFields?l.spec.fieldDefs(r).forEach(function(e){var t=c(a(n.fields,e),e,r.config,o);i.push(t)}):n.fields&&n.fields.forEach(function(e){var t=c(e,u(l.spec.fieldDefs(r),e),r.config,o);i.push(t)}),e=r,(t.isConcatSpec(e)||t.isFacetSpec(e)||t.isLayerSpec(e)||t.isRepeatSpec(e))&&(n.isComposition=!0),n.fields=i,n},r.getFieldOption=a,r.getFieldDef=u,r.supplementFieldOption=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"vega-lite/build/src/spec":23,"vega-lite/build/src/type":26}],34:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("d3-selection");function r(){i.select("#vis-tooltip").classed("dark-theme light-theme",!1)}n.getTooltipPlaceholder=function(){return i.select("#vis-tooltip").empty()?i.select("body").append("div").attr("id","vis-tooltip").attr("class","vg-tooltip"):i.select("#vis-tooltip")},n.bindData=function(e,t){e.selectAll("table").remove();var n=e.append("table").selectAll(".tooltip-row").data(t);n.exit().remove(),n.enter().append("tr").attr("class","tooltip-row").each(function(e){var t=i.select(this);e.render?t.append("td").attr("colspan","2").append(function(){return e.render(e.title,e.value)}):(t.append("td").attr("class","key").text(function(e){return e.title+":"}),t.append("td").attr("class","value").text(function(e){return e.value}))})},n.clearData=function(){i.select("#vis-tooltip").selectAll(".tooltip-row").data([]).exit().remove()},n.updatePosition=function(t,e){var n=10,r=10;e&&e.offset&&void 0!==e.offset.x&&null!==e.offset.x&&(n=e.offset.x),e&&e.offset&&void 0!==e.offset.y&&null!==e.offset.y&&(r=e.offset.y),i.select("#vis-tooltip").style("top",function(){var e=this.getBoundingClientRect().height;return t.clientY+e+r<window.innerHeight?t.clientY+r+"px":t.clientY-e-r+"px"}).style("left",function(){var e=this.getBoundingClientRect().width;return t.clientX+e+n<window.innerWidth?t.clientX+n+"px":t.clientX-e-n+"px"})},n.clearPosition=function(){i.select("#vis-tooltip").style("top","-9999px").style("left","-9999px")},n.updateColorTheme=function(e){r(),e&&"dark"===e.colorTheme?i.select("#vis-tooltip").classed("dark-theme",!0):i.select("#vis-tooltip").classed("light-theme",!0)},n.clearColorTheme=r},{"d3-selection":2}]},{},[30])(30)});